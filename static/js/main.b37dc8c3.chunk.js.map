{"version":3,"sources":["components/PieChartData.js","shared/activeUserContext.js","pages/Dashboard/Dashboard.js","pages/HomePage/HomePage.js","pages/LoginPage/LoginPage.js","pages/SignUpPage/SignUp.js","components/utils.js","Model/CommentModel.js","components/SingleMessage.js","components/NewMsgModal.js","pages/MessagesPage/Messages.js","components/NewUserModal.js","pages/TenantsPage/Tenants.js","Model/VoteTicketModel.js","components/SelectOptionsForVote.js","components/SingleVoteTicket.js","components/NewVoteTicketModal.js","pages/VotingsPage/Votings.js","components/SiteNavBar.js","assets/images/logo.png","components/Footer.js","Model/UserModel.js","Model/BuildingModel.js","Model/MessageModel.js","App.js","reportWebVitals.js","index.js"],"names":["PieChartData","entity","arrLabels","options","arrVotes","votes","arrDataPie","noOfVotes","length","backgroundColor","borderColor","setBgColor","setBorderColor","index","push","Array","isArray","i","forEach","label","result","reduce","counter","obj","countResults","data","labels","datasets","borderWidth","responsive","ActiveUserContext","createContext","Dashboard","voteTickets","activeUser","useContext","to","checkIfAdmin","votesArray","arrVoteTickets","isAdmin","filter","ticket","buildingId","status","Container","Nav","Link","className","href","Row","Col","map","voteTicket","md","sm","HomePage","Jumbotron","fluid","xs","Image","src","alt","LoginPage","users","onLogin","useState","email","setEmail","pswd","setPswd","nonUser","setNonUser","Form","onSubmit","e","preventDefault","user","login","Alert","variant","Group","controlId","Control","type","placeholder","value","onChange","target","Button","block","SignUp","onNewUser","name","setName","buildingName","setBuildingName","city","setCity","img","setImg","street","setStreet","streetNu","setStreetNu","appNu","setAppNu","createNewUser","URL","createObjectURL","as","Label","column","accept","files","onClick","SetCurrentDateTime","today","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","CommentModel","singleComment","dateCreated","this","userId","commentText","SingleMessage","message","updateMessage","newComment","setNewComment","title","rounded","details","priority","messageId","ArrayCommentsId","parse","commentsArray","returnStr","userName","cmntDate","userImg","console","log","cmnt","userPos","findIndex","showCommentsForMessage","newCommentObj","rows","size","NewMsgModal","show","onClose","onCreate","activeUserBuildingid","activeUserId","objMsg","setTitle","setDetails","setPriority","objState","setObjState","objMsgId","setMsgId","modalTitle","onBeforeClose","useEffect","Modal","onHide","Header","closeButton","Title","Body","option","Footer","Messages","messages","onNewMessage","onDeleteMsg","onUpdateComment","newMsgeModal","setNewMsgeModal","setMsgModal","filterText","setFilterText","sortBy","setSortBy","sortedMessages","msg","toLowerCase","includes","setUpdate","funcUpdateMessage","comment","sort","msg1","msg2","msgID","NewUserModal","objUser","onUpdateUser","appId","setAppId","pswrd","appNumber","stNumber","TenantsPage","onDeleteUser","newUserModal","setNewUserModal","setUserModal","sortedUsers","isActive","parseInt","VoteTicketModel","singleVoteTicket","VoteTicketId","endDate","voteSummary","SelectOptionsForVote","selectOptions","funcSetVoteFor","voteFor","setVoteFor","SingleVoteTicket","funcUpdateDate","funcUpdateVote","funcCloseTicket","endDateValue","endDateOnChange","votedAlert","setVotedAlert","closeTicket","toLocaleString","minDate","voted","find","vote","userid","NewTicketModal","endDateState","setEndDateState","arrOptions","setArrOptions","field","idx","event","values","handleChange","splice","handleRemove","handleAdd","tempOptions","tempArr","element","datePart","timePart","Votings","onNewTicket","onUpdateDate","onUpdateVote","newTicketModal","setNewTicketModal","closedSortedTickets","openTickets","updateDate","updateVote","style","openVoteTicket","closedVoteTicket","SiteNavBar","onLogout","useLocation","Navbar","sticky","collapseOnSelect","expand","bg","Brand","Toggle","aria-controls","Collapse","id","UserModel","SingleUser","pwd","BuildingModel","SingleBuilding","userEmail","MessageModel","singleMessage","App","usersJSON","setUsers","buildinsJSON","building","buildingModel","buildings","setBuildings","messagesJSON","setMessages","voteTicketsJSON","setVoteTickets","setActiveUser","newUser","checkUser","concat","Provider","exact","path","newBuilding","addBuilding","Tenants","usersClone","addNewMsg","insertNewMessage","window","confirm","msgAfterDel","msgId","msgPos","messagesClone","addNewVote","ticketId","ticketPos","voteTicketsClone","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b37dc8c3.chunk.js","sourcesContent":["import { Pie } from 'react-chartjs-2';\r\nimport React from 'react';\r\n\r\n\r\nfunction PieChartData({entity}){\r\n\r\n    //get labels : \"options\": [\"yes\" , \"no\"]\r\n    let arrLabels = entity.options; \r\n    let arrVotes = entity.votes; \r\n    let arrDataPie = [];\r\n\r\n    let noOfVotes = arrVotes.length; \r\n\r\n    let backgroundColor= [\r\n        'rgba(255, 99, 132, 0.2)',\r\n        'rgba(54, 162, 235, 0.2)',\r\n        'rgba(255, 206, 86, 0.2)',\r\n        'rgba(75, 192, 192, 0.2)',\r\n        'rgba(153, 102, 255, 0.2)',\r\n        'rgba(255, 159, 64, 0.2)',\r\n      ]; \r\n\r\n    let  borderColor= [\r\n        'rgba(255, 99, 132, 1)',\r\n        'rgba(54, 162, 235, 1)',\r\n        'rgba(255, 206, 86, 1)',\r\n        'rgba(75, 192, 192, 1)',\r\n        'rgba(153, 102, 255, 1)',\r\n        'rgba(255, 159, 64, 1)',\r\n      ] ; \r\n      \r\n\r\n     let setBgColor=[];\r\n     let setBorderColor = []; \r\n     \r\n     \r\n     for (let index = 0; index < arrLabels.length; index++) {\r\n        setBgColor.push(backgroundColor[index]); \r\n        setBorderColor.push(borderColor[index]); \r\n     }\r\n\r\n\r\n\r\n    //get data from votes:\r\n    // \"votes\":[  {\"userid\":1001, \"result\":0  }, {\"userid\":1002, \"result\":0 }  ]\r\n    \r\n    /**\r\n     * \r\n     * @param {*} label \r\n     * @param {*} arrVotes \r\n     * @returns : count (int) \r\n     */\r\n    function countResults(label, arrVotes){\r\n      const count = arrVotes.reduce((counter, obj) => obj.result === label ? counter += 1 : counter, 0); // 6\r\n      //console.log(count);\r\n      return count; \r\n    }\r\n\r\n \r\n    /**\r\n     * \r\n     * for each label ( like: yes/no etc)\r\n     * count ( func countResults() ) how many occurance are found in votes array.\r\n     * arrVotes is obj array and use reduce to preserve the orige array.\r\n     * each time the counting come back with result > 0 \r\n     * it is placed in the new created dynamically array - arrDataPie and it's index is incremented-\r\n     * which is the data for the pie.\r\n     * \r\n     */\r\n    if ( Array.isArray(arrLabels)  )  {\r\n      let i=0; \r\n      arrLabels.forEach(label => {\r\n      let result=0; \r\n      result = countResults(label, arrVotes); \r\n      if (result > 0 )\r\n      {\r\n        arrDataPie[i] = result; \r\n        i++; \r\n      }\r\n    });\r\n  } \r\n\r\n    const data = {\r\n        labels: arrLabels,  //['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],\r\n        datasets: [\r\n          {\r\n            label: noOfVotes + '# of Votes', //not showing\r\n            data: arrDataPie, //[12, 19, 3, 5, 2, 3], //arrDataPie\r\n            backgroundColor:setBgColor,\r\n            borderColor: setBorderColor,\r\n            borderWidth: 1\r\n          },\r\n        ],\r\n        options: {\r\n          //Customize chart options\r\n          responsive: true,\r\n        }\r\n      \r\n      };\r\n\r\n     return  (\r\n        <>\r\n         <strong>Voting Percentage</strong>\r\n          <Pie data={data} />\r\n        </>\r\n      );\r\n\r\n}\r\n\r\n\r\nexport default PieChartData; ","import {createContext} from 'react';\r\n\r\nconst ActiveUserContext = createContext(null);\r\n\r\nexport default ActiveUserContext;","import { Container , Nav , Row, Col} from \"react-bootstrap\";\r\nimport React , {useContext} from 'react';\r\nimport { Redirect } from 'react-router';\r\nimport PieChartData from '../../components/PieChartData'; \r\n \r\n\r\n//context\r\nimport ActiveUserContext from '../../shared/activeUserContext';\r\n\r\nfunction Dashboard({voteTickets}){\r\n\r\n    const activeUser = useContext(ActiveUserContext);\r\n\r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n\r\n    let  checkIfAdmin = false; \r\n    let votesArray = []; \r\n    let arrVoteTickets=[];\r\n\r\n    if (activeUser)\r\n    {\r\n        checkIfAdmin = activeUser.isAdmin; \r\n    }\r\n\r\n   \r\n    //display votes for current user&building\r\n    if(voteTickets){\r\n      arrVoteTickets = voteTickets.filter(ticket =>  ticket.buildingId === activeUser.buildingId);\r\n    }\r\n \r\n    \r\n\r\n    if (arrVoteTickets){\r\n        arrVoteTickets.forEach(ticket => {\r\n            if (ticket.status === \"open\" ) {\r\n                votesArray.push(ticket)   ; \r\n            }   \r\n        });\r\n    }    \r\n\r\n    \r\n\r\n    return(\r\n        <Container>\r\n            <h1>Dashboard</h1>\r\n\r\n            {checkIfAdmin === true? <Nav.Link  className=\"btnLink\" href=\"#/tenants\">Add New Tenants</Nav.Link> : null}\r\n        \r\n            <>\r\n            <Row className=\"dashboardPieRow\">\r\n                <Col>   <h3>Open voting tickets results </h3> </Col>\r\n            </Row>\r\n            <Row >\r\n            {votesArray.map((voteTicket) => {\r\n                return (\r\n                    <Col md={3} sm={6}>   \r\n                      \r\n                            <PieChartData entity={voteTicket} />  \r\n                            \r\n                     \r\n                    </Col>\r\n                    );\r\n                })}\r\n            </Row>\r\n            </>\r\n        </Container>\r\n        )\r\n}\r\n\r\nexport default Dashboard;","import {Jumbotron, Container, Row, Col, Image} from 'react-bootstrap';\r\n\r\nfunction HomePage(){\r\n    return(\r\n        <>\r\n            <Jumbotron fluid className=\"Jumbotron\">\r\n                <h1 className=\"HomePageHeader\">\r\n                Homeowner Association Management System\r\n                </h1>\r\n            </Jumbotron>\r\n           \r\n            <div className=\"homePageMain\">\r\n                   <h1 className=\"secondPHomePage\">\r\n                       Who we are\r\n                   </h1>\r\n                   <section className=\"homePageSectionText\">\r\n                        Communication between tenants and homeowner committee can be chalenging task.\r\n                        <br/>\r\n                        Our aim is to ease the process and automate it simplifying the flow\r\n                        of Communication.\r\n                        <br/>\r\n                        Though there are many WhatsUp groups for that matter,our added value is\r\n                        <br/>\r\n                         to maintain \r\n                        and visualize the issues. \r\n                   </section>\r\n            </div>\r\n\r\n\r\n            <Container>\r\n                    <Row className=\"homePageRow\">\r\n                        <Col xs={12} md={4}>\r\n                            <h2>Comitee member</h2>\r\n                            <br/>\r\n                            Manage: Voting, Messages, Issues, Tenants\r\n                        </Col>\r\n                        <Col xs={12} md={4}>\r\n                            <Image src=\"images/city-homepage-project.png\"  fluid  alt=\"\"></Image>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    <Row className=\"homePageRow2\">\r\n                        <Col xs={12} md={4}>\r\n                           <Image src=\"images/city-homepage-2.png\" fluid  alt=\"\"></Image>\r\n                        </Col>\r\n                        <Col xs={12} md={4}>\r\n                            <h2>\r\n                               Tenants\r\n                            </h2>\r\n                            <br/>\r\n                            View and participate: Vote on issues you care, View messages of your building, \r\n                            Report, manage and view issues.\r\n                        </Col>\r\n                    </Row>\r\n          </Container>\r\n         \r\n        </>\r\n    )\r\n}\r\n\r\nexport default HomePage;","import { useState, useContext } from \"react\";\r\nimport { Form ,  Button, Alert} from \"react-bootstrap\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\n\r\n\r\n//context\r\nimport ActiveUserContext from '../../shared/activeUserContext';\r\n\r\nfunction LoginPage({users, onLogin}){\r\n\r\n    const activeUser = useContext(ActiveUserContext);\r\n\r\n    const [email, setEmail] = useState(\"\");\r\n    const [pswd, setPswd] = useState(\"\");\r\n    const [nonUser, setNonUser]= useState(false);\r\n\r\n    if (activeUser) {\r\n        return <Redirect to=\"/dashboard\"/>\r\n    }\r\n\r\n    function login(e) {\r\n        e.preventDefault();\r\n\r\n        let activeUser = null;\r\n        \r\n        for (const user of users) {\r\n            if (user.login(email, pswd)) { //if exists\r\n                activeUser = user;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (activeUser) {\r\n            onLogin(activeUser);\r\n        } else {\r\n            setNonUser(true);\r\n        }\r\n    }\r\n\r\n\r\n     return (\r\n        <div>\r\n            <h1 className=\"loginHeader\">Login to HOA system </h1>\r\n            <h2 className=\"loginHeader\">  <Link to=\"/signup\">Create a new account</Link>  &nbsp; if you are not registered</h2>\r\n           \r\n               \r\n                <Form className=\"loginForm\" onSubmit={login}>\r\n               \r\n                    {nonUser? <Alert variant=\"danger\">Invalid credentials</Alert> : null}\r\n\r\n                    <Form.Group controlId=\"formBasicEmail\">\r\n                        <Form.Control type=\"email\" placeholder=\"Enter email\"\r\n                        value={email} onChange={e=> setEmail(e.target.value)} />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formBasicPassword\">\r\n                        <Form.Control type=\"password\" placeholder=\"Password\" \r\n                        value={pswd} onChange={e=> setPswd(e.target.value)}/>\r\n                    </Form.Group>\r\n                   \r\n                    <Button variant=\"success\" type=\"submit\" block>\r\n                        Login\r\n                    </Button>\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\nexport default LoginPage;","import { useState } from \"react\";\r\nimport { Form ,  Button, Col, Row, Image } from \"react-bootstrap\";\r\n//import { Link, Redirect } from \"react-router-dom\";\r\n\r\nfunction SignUp({onNewUser}){\r\n\r\n    const [email, setEmail]               = useState(\"\");\r\n    const [name, setName]                 = useState(\"\");\r\n    const [pswd, setPswd]                 = useState(\"\");\r\n    const [buildingName, setBuildingName] = useState(\"\");\r\n    const [city, setCity]                 = useState(\"\");\r\n    const [img, setImg] = useState(null);\r\n    const [street, setStreet]             = useState(\"\");\r\n    const [streetNu, setStreetNu]         = useState(\"\");\r\n    const [appNu, setAppNu]               = useState(\"\");\r\n\r\n     \r\n    function register(e) {\r\n        e.preventDefault();\r\n    \r\n        //console.log(\"register----\"+email );\r\n        createNewUser();\r\n    }\r\n\r\n    function createNewUser() {\r\n        //console.log(\"sign up - createNewUser \"); \r\n        let isAdmin = true; \r\n        \r\n        onNewUser(isAdmin, name, email, img ? URL.createObjectURL(img) : \"\",  pswd, city, street, streetNu, buildingName,  appNu );\r\n    }\r\n\r\n\r\n    function handleFileChange(e) {\r\n        if (e.target.files.length === 1) {\r\n            setImg(e.target.files[0]);\r\n        } else {\r\n            setImg(null);\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className=\"signUpPage\">\r\n            <h1 className=\"loginHeader\">Create a Committee Member Account</h1>\r\n           \r\n            <Form className=\"loginForm\" onSubmit={register}>\r\n\r\n                <Form.Group as={Row} controlId=\"SignUpName\">\r\n                   <Form.Control type=\"text\" placeholder=\"Full name:\"\r\n                   value={name} onChange={e=> setName(e.target.value)} />\r\n                </Form.Group>\r\n\r\n               <Form.Group as={Row} controlId=\"SignUpEmail\">\r\n                   <Form.Control type=\"email\" placeholder=\"Enter email\"\r\n                   value={email} onChange={e=> setEmail(e.target.value)} />\r\n               </Form.Group>\r\n\r\n               <Form.Group as={Row}  controlId=\"SignUpPassword\">\r\n                   <Form.Control type=\"password\" placeholder=\"Password\" \r\n                   value={pswd} onChange={e=> setPswd(e.target.value)}/>\r\n               </Form.Group>\r\n              \r\n                <Form.Group as={Row} controlId=\"SignUpBuildingName\">\r\n                   <Form.Control type=\"text\" placeholder=\"Building name:\"\r\n                   value={buildingName} onChange={e=> setBuildingName(e.target.value)} />\r\n                </Form.Group>\r\n\r\n                <Form.Group as={Row} controlId=\"SignUpCity\">\r\n                   <Form.Control type=\"text\" placeholder=\"City:\"\r\n                   value={city} onChange={e=> setCity(e.target.value)} />\r\n                </Form.Group>\r\n\r\n                <Form.Group as={Row} controlId=\"SignUpstreet\">\r\n                   <Form.Control type=\"text\" placeholder=\"street:\"\r\n                   value={street} onChange={e=> setStreet(e.target.value)} />\r\n                </Form.Group>\r\n\r\n                <Form.Group as={Row} controlId=\"SignUpstreetNu\">\r\n                   <Form.Control type=\"number\" placeholder=\"street Number:\"\r\n                   value={streetNu} onChange={e=> setStreetNu(e.target.value)} />\r\n                </Form.Group>\r\n\r\n                <Form.Group as={Row} controlId=\"SignUpAppNu\">\r\n                   <Form.Control type=\"number\" placeholder=\"Appartment Number:\"\r\n                   value={appNu} onChange={e=> setAppNu(e.target.value)} />\r\n                </Form.Group>\r\n\r\n\r\n                <Form.Group as={Row} controlId=\"formHorizontalImg\">\r\n                        <Form.Label column sm={3}>\r\n                            Your Image\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"file\" accept=\"image/*\" onChange={handleFileChange}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n                    <Image src={img ? URL.createObjectURL(img) : \"\"}/>\r\n\r\n                <Button variant=\"success\" type=\"submit\" onClick={createNewUser} block>\r\n                   Sign Up\r\n               </Button>\r\n            </Form>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SignUp;","function SetCurrentDateTime(){\r\n        let  today = new Date();  \r\n        let  time = \"\"; \r\n        let  date = \"\";\r\n        let msgCreatedAt = \"\"; \r\n\r\n        date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();\r\n        time = today.getHours() + ':' + today.getMinutes() + ':' + today.getSeconds();\r\n\r\n        msgCreatedAt =  date + \" \" + time; \r\n\r\n        return msgCreatedAt;\r\n}\r\n\r\nexport default SetCurrentDateTime; \r\n\r\n ","import SetCurrentDateTime from '../components/utils';\r\n\r\nexport default class CommentModel {\r\n\r\n    constructor(singleComment) {\r\n        \r\n        if (singleComment.dateCreated === null){\r\n            this.dateCreated = SetCurrentDateTime(); //return string - current date/time\r\n        }\r\n        else{\r\n            this.dateCreated   =  singleComment.dateCreated;\r\n        }\r\n        \r\n        this.userId        =  singleComment.userId;        //FK (UserModel)\r\n        this.buildingId    =  singleComment.buildingId;    //FK. (BuildingModel)\r\n        this.commentText   =  singleComment.commentText; \r\n    }\r\n}","import { useState , useContext } from \"react\";\r\nimport { Button, Row, Col, Image , Form} from \"react-bootstrap\"; \r\n\r\n\r\nimport CommentModel from '../Model/CommentModel';\r\nimport SetCurrentDateTime from '../components/utils';\r\n\r\n//string to html react parser (npm install)\r\nimport parse from 'html-react-parser';\r\nimport ActiveUserContext from '../shared/activeUserContext';\r\n\r\nfunction SingleMessage({users, message, updateMessage}){\r\n\r\n    //form, get new comment\r\n    const [newComment, setNewComment] = useState(\"\");\r\n    const pathPre = process.env.PUBLIC_URL;\r\n    const activeUser = useContext(ActiveUserContext);\r\n\r\n    let img = \"\"; \r\n\r\n    img = message.img; \r\n \r\n   \r\n    //const imgSrc = pathPre+ \"/\" + img; \r\n\r\n    function saveComment(e){\r\n        e.preventDefault();\r\n        //alert(newComment);\r\n\r\n        let dateCreated = SetCurrentDateTime(); \r\n        let userId = activeUser.userId; \r\n        let buildingId = message.buildingId; \r\n        let commentText = newComment; \r\n\r\n        const  newCommentObj = new CommentModel({\r\n            dateCreated,\r\n            userId,\r\n            buildingId,\r\n            commentText\r\n        });\r\n\r\n        //re - render message obj\r\n        updateMessage(newCommentObj , message);\r\n\r\n   }\r\n\r\n\r\n   \r\n    //get array of comments and return string combined from \r\n    //<ul> text (comments) items \r\n    //caller uses parse() to extract returned string to html\r\n    function showCommentsForMessage(commentsArray){\r\n        let returnStr = \"\"; \r\n        let userName =\"\"; \r\n        let cmntDate = \"\"; \r\n        let userImg = \"\"; \r\n\r\n        console.log(\"commentsArray\"); \r\n        console.log (commentsArray); \r\n        \r\n        if(commentsArray){\r\n            returnStr = \"<ul>\"; \r\n        \r\n            commentsArray.forEach(cmnt => {\r\n                cmntDate = cmnt.dateCreated; \r\n\r\n                if (cmnt.userId){\r\n                    //find user\r\n                    let userPos = users.findIndex(user => user.userId === cmnt.userId); //index in array \r\n                    userName = users[userPos].name; \r\n                    userImg = users[userPos].img; \r\n                    returnStr += \"<li><img class='avatarIcon' src=\"+pathPre+\"/\"+userImg+\" /><span class='cmntHeaderTxt'>\"+ userName +\"@\"+cmntDate+\"</span><br/>\" + cmnt.commentText + \"</li>\" ; \r\n                }\r\n                else\r\n                {\r\n                    returnStr += \"<li><span class='cmntHeaderTxt'>\"+ cmnt.userId +\"@\"+cmntDate+\"</span><br/>\" + cmnt.commentText + \"</li>\" ; \r\n                }\r\n\r\n\r\n             });\r\n\r\n            returnStr += \"</ul>\";\r\n        }\r\n        return   returnStr;\r\n    }\r\n\r\n\r\n\r\n    return(\r\n       <Row>\r\n           <Col xs={12} md={6} className=\"msgCardsCol\">\r\n                 <h5>{message.title}</h5>\r\n      \r\n                <Image src={img} rounded className=\"imgAvatar\" />\r\n      \r\n                 <strong>Details: </strong> {message.details}\r\n                 <br/>\r\n                 <strong>Priority: </strong> {message.priority}\r\n            </Col>\r\n\r\n           <Col xs={12} md={6}>\r\n             <h5>Comments</h5>\r\n              Message ID: {message.messageId}\r\n                       \r\n              {message.ArrayCommentsId?  parse(showCommentsForMessage(message.ArrayCommentsId))   : \"\"} \r\n \r\n            \r\n            <Form onSubmit={saveComment}>\r\n                <Form.Group controlId={`commentMsg${message.messageId}`}>\r\n                   <Form.Control as=\"textarea\" rows={3}\r\n                        value={newComment}\r\n                        onChange={e => setNewComment(e.target.value)}\r\n                        placeholder= \"Add new comment\"\r\n                      />\r\n                </Form.Group>\r\n           \r\n                <Button variant=\"secondary\" size=\"sm\" type=\"submit\">Add Comment</Button>\r\n            </Form>  \r\n\r\n\r\n            </Col>\r\n\r\n\r\n       </Row>\r\n\r\n   \r\n    )\r\n}\r\n\r\nexport default  SingleMessage; ","import React, { useEffect, useState } from 'react';\r\nimport { Button, Modal, Form, Col, Row, Image } from 'react-bootstrap';\r\n\r\nimport SetCurrentDateTime from './utils';\r\n\r\n// if messageIndex is passed the it is an update process else it is an insert process\r\n\r\nfunction NewMsgModal({ show, onClose, onCreate , activeUserBuildingid, activeUserId, objMsg}) {\r\n \r\n    const [title, setTitle] = useState(\"\");\r\n    const [details, setDetails] = useState(\"\");\r\n    const [priority, setPriority] = useState(\"Info\");\r\n    const [img, setImg] = useState(\"\");\r\n\r\n    const [objState, setObjState] = useState(null);\r\n\r\n    const [objMsgId , setMsgId] = useState(\"\"); \r\n\r\n    let modalTitle = \"Create New Message \"\r\n\r\n    if (objMsg){\r\n        modalTitle= \"Update Message\"\r\n    }\r\n     \r\n\r\n    function onBeforeClose()\r\n    {\r\n        clearForm(); \r\n        onClose(); \r\n\r\n    }\r\n\r\n\r\n\r\n    // get the message object data on load \r\n    useEffect(() => {\r\n        setTitle(objMsg.title); \r\n        setDetails(objMsg.details); \r\n        setPriority(objMsg.priority); \r\n        setImg(objMsg.img); \r\n        setMsgId(objMsg.messageId)\r\n         \r\n      }, [objMsg, objState]); \r\n    \r\n  \r\n    let  dateCreated = SetCurrentDateTime();\r\n\r\n    // define select box options of priority\r\n    const selectPriorityOptions = [\r\n        {\r\n          name: \"Info\",\r\n          value: \"Info\",\r\n        },\r\n        {\r\n          name: \"Important\",\r\n          value: \"Important\",\r\n        }\r\n      ];\r\n\r\n\r\n    //clear form data   \r\n    function clearForm() {\r\n        setTitle(\"\");\r\n        setDetails(\"\");\r\n        setPriority(\"Info\")\r\n        setImg(null);\r\n        setMsgId(\"\");\r\n        setObjState(null); \r\n    }\r\n\r\n\r\n    function createMsg() {\r\n        //messageId; create new message id from last item of msg array\r\n        let buildingId = activeUserBuildingid; // get building id\r\n        let userId = activeUserId;             // get current user id ( isAdmin)\r\n \r\n        let messageId = objMsgId;  //if messageId != null -> update, else -> insert \r\n\r\n        onCreate(messageId, buildingId,userId,  dateCreated, title, details, priority, img , \"\");\r\n        onBeforeClose();\r\n    }\r\n\r\n\r\n    //image file upload , handles the insert and the update \r\n    function handleFileChange(e) {\r\n        if (e.target.files.length === 1) {\r\n            // setImg(e.target.files[0]);\r\n            setImg(URL.createObjectURL(e.target.files[0]) ); \r\n        } else {\r\n            setImg(null);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <Modal show={show} onHide={onBeforeClose} size=\"lg\">\r\n            <Modal.Header closeButton>\r\n                <Modal.Title> {modalTitle} </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <Form>\r\n                    <Form.Group as={Row} controlId=\"MsgTitle\">\r\n                        <Form.Label column sm={3}>\r\n                            Title\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"text\" placeholder=\"Message title\" \r\n                                value={title} onChange={e => setTitle(e.target.value)}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Row} controlId=\"MsgDetails\">\r\n                        <Form.Label column sm={3}>\r\n                            Details\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"text\" placeholder=\"Message details\" \r\n                                value={details} onChange={e => setDetails(e.target.value)}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n\r\n\r\n                    <Form.Group as={Row} controlId=\"MsgPriority\">\r\n                        <Form.Label column sm={3}>\r\n                            Priority\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                             <Form.Control as=\"select\" value={priority}   \r\n                                    onChange={e => setPriority(e.target.value)}>\r\n                                    {selectPriorityOptions.map((option) => (\r\n                                    <option \r\n                                        key={option.value}  \r\n                                        value={option.value}>{option.name}\r\n                                    </option>\r\n                                    ))}\r\n                             </Form.Control>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n\r\n                    <Form.Group as={Row} controlId=\"MsgImg\">\r\n                        <Form.Label column sm={3}>\r\n                            Message Image\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"file\" accept=\"image/*\" onChange={handleFileChange}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n                      {/* {objMsg.img !== \"\" ?  <Image src={objMsg.img}/>  :  <Image src={img ? URL.createObjectURL(img) : \"\"}/>  }                        \r\n                    */}\r\n                    <Image src={img} alt=\"\" className=\"imgAvatar\" />                        \r\n                              \r\n                </Form>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={onBeforeClose}>\r\n                    Cancel\r\n                </Button>\r\n                <Button variant=\"primary\" onClick={createMsg}>\r\n                   Submit\r\n                </Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n}\r\n\r\nexport default NewMsgModal;","import { Redirect } from 'react-router';\r\nimport { useState, useContext  } from \"react\";\r\nimport SingleMessage from '../../components/SingleMessage';\r\nimport { Button, Col, Container, Row } from 'react-bootstrap';\r\n\r\n//context\r\nimport ActiveUserContext from '../../shared/activeUserContext';\r\nimport NewMsgModal from '../../components/NewMsgModal';\r\n\r\nfunction Messages({messages, users, onNewMessage, onDeleteMsg, onUpdateComment}){\r\n    \r\n    const activeUser = useContext(ActiveUserContext);\r\n\r\n    const [newMsgeModal, setNewMsgeModal] = useState(false);\r\n    const [message, setMsgModal] = useState(\"\");\r\n    const [filterText, setFilterText] = useState(\"\");\r\n    const [sortBy, setSortBy] = useState(\"dateCreated\");\r\n\r\n   \r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n    \r\n   \r\n      \r\n    // 1) Filter the messages based on the filterText\r\n    //    make sure that the messages presenter are for the building id of the active user  \r\n    let sortedMessages = messages.filter(msg => \r\n        msg.buildingId === activeUser.buildingId && (\r\n        msg.title.toLowerCase().includes(filterText.toLowerCase()) || \r\n        msg.details.toLowerCase().includes(filterText.toLowerCase())));\r\n\r\n    //  console.log(\"messages js - sortedMessages array:\")    \r\n    //  console.log (sortedMessages);\r\n\r\n    // 2) Sort the messages  array\r\n    sortedMessages.sort(\r\n            (msg1, msg2) => {\r\n                if (msg1[sortBy] > msg2[sortBy]) {\r\n                    return 1;\r\n                } \r\n                else if (msg1[sortBy] < msg2[sortBy]) {\r\n                    return -1;\r\n                }    \r\n                else {\r\n                    return 0;\r\n                }\r\n            }\r\n            );\r\n\r\n    \r\n            \r\n    function setUpdate(message){\r\n        setNewMsgeModal(true);\r\n        setMsgModal(message); \r\n    }        \r\n\r\n\r\n    /*  send the message id to app.js to delete it as the array is \r\n        held with state handeling in app.js\r\n        onDeleteMsg - is sent as a prop from app.js and this func pointer receives \r\n        back the index sent to it\r\n    */\r\n    function onDeleteClick (msgID){\r\n        onDeleteMsg(msgID); \r\n    }\r\n\r\n \r\n    //pass cller (app.js ) by local func \r\n    function funcUpdateMessage(comment, message){\r\n   \r\n        onUpdateComment(comment, message); \r\n        \r\n    }\r\n\r\n    return(\r\n       <Container>\r\n            <h1>Messages </h1>\r\n            <br/>\r\n            <Row>\r\n                <Col md={8} sm={12}>\r\n                   <form className=\"d-flex\">\r\n                        <input type=\"text\" className=\"msgPageInput\"\r\n                                placeholder=\"Filter Messages by text in title and details\" \r\n                                value={filterText}\r\n                                onChange={e => setFilterText(e.target.value)}/>\r\n                        <select value={sortBy} \r\n                                onChange={e => setSortBy(e.target.value)}\r\n                                className=\"form-control\">\r\n                                <option value=\"dateCreated\">Filter by: Date Created</option>\r\n                                <option value=\"priority\">Filter by: Priority</option>\r\n                        </select>\r\n                                    \r\n                    </form> \r\n                </Col>\r\n                <Col md={2} sm={12}>\r\n                    {/* new msg btn */}\r\n                      {activeUser.isAdmin ? <Button variant=\"outline-primary\"\r\n                                        onClick={() => setUpdate(\"\")}>New Message\r\n                                        </Button> : null}\r\n                </Col>\r\n            </Row>\r\n\r\n       \r\n           \r\n            {sortedMessages.map((message)  => \r\n                <>\r\n                    <Row className=\"msgCards\" key={message.messageId}  >\r\n                        <Col>\r\n                           \r\n                           {/* Update & delete message buttons */}\r\n                            <Row>\r\n                                    <Col xs={6} md={2}>\r\n                                    {/* update msg btn  */}\r\n                                    {activeUser.isAdmin ? \r\n                                        <Button className=\"btnUpdateMsg\" variant=\"primary\" size=\"sm\"\r\n                                            onClick={() => setUpdate(message) }>Update Message\r\n                                        </Button> : null\r\n                                        }\r\n                                    </Col>\r\n                            \r\n                                    <Col xs={6} md={2}>\r\n                                        {activeUser.isAdmin ? \r\n                                            <Button variant=\"danger\" size=\"sm\"\r\n                                                onClick={() => onDeleteClick(message.messageId)}>Delete Message\r\n                                            </Button> : null\r\n                                            \r\n                                        }\r\n                                    </Col>\r\n                            </Row>\r\n\r\n                            {/* show single message with its comments */}           \r\n                            <SingleMessage \r\n                                users={users}\r\n                                message={message} \r\n                                updateMessage={funcUpdateMessage} />\r\n\r\n\r\n                        </Col>\r\n                    </Row>\r\n                    \r\n                   \r\n                    </>\r\n                )}\r\n           \r\n\r\n            {/* activate message modal      */}\r\n            <NewMsgModal \r\n                show={newMsgeModal} \r\n                onClose={() => setNewMsgeModal(false)} \r\n                onCreate={onNewMessage}\r\n                activeUserBuildingid={activeUser.buildingId}\r\n                activeUserId = {activeUser.userId}\r\n                objMsg = {message}                    \r\n                \r\n                />\r\n\r\n\r\n       </Container>\r\n    )\r\n}\r\n\r\nexport default Messages;","import React, { useEffect, useState , useContext} from 'react';\r\nimport { Button, Modal, Form, Col, Row, Image } from 'react-bootstrap';\r\nimport ActiveUserContext from '../shared/activeUserContext';\r\n\r\n/*\r\n    only admin can create users so active user here is admin, \r\n    since admin and tenant are in the \r\n    same building, all the details of the building are \r\n    taken from the activeUser object\r\n*/ \r\n\r\nfunction NewUserModal({ show, onClose, onCreate , objUser , onUpdateUser}) {\r\n \r\n    const activeUser = useContext(ActiveUserContext);\r\n\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [img, setImg] = useState(\"\");\r\n    const [appId, setAppId] = useState(\"\");\r\n    const [pswd, setPswd] =  useState(\"\");\r\n    const [objState, setObjState] = useState(null);\r\n    \r\n\r\n    let modalTitle = \"Create New User \"\r\n\r\n    if (objUser){\r\n        modalTitle= \"Update User\"\r\n    }\r\n     \r\n\r\n    function onBeforeClose()\r\n    {\r\n        clearForm(); \r\n        onClose(); \r\n\r\n    }\r\n\r\n\r\n\r\n    // get the user  object data on load \r\n    useEffect(() => {\r\n        if (objUser){\r\n            setName(objUser.name); \r\n            setEmail(objUser.email); \r\n            setPswd(objUser.pswrd); \r\n            setImg(objUser.img); \r\n            setAppId(objUser.appNumber)\r\n        }\r\n      }, [objUser, objState]); \r\n    \r\n  \r\n    \r\n    //clear form data   \r\n    function clearForm() {\r\n        setName(\"\");\r\n        setEmail(\"\");\r\n        setPswd(\"\"); \r\n        setImg(null);\r\n        setAppId(\"\");\r\n        setObjState(null); \r\n    }\r\n\r\n\r\n    function createUser() {\r\n      \r\n        let userId = 0;\r\n        let pswrd = pswd; \r\n        let isAdmin=\"false\"; \r\n        let city = activeUser.city; \r\n        let street = activeUser.street; \r\n        let stNumber = activeUser.stNumber;\r\n        let buildingName = activeUser.buildingName; \r\n        let buildingId = activeUser.buildingId; \r\n        let appNumber = appId;\r\n\r\n\r\n        if (objUser){ //existing user, just update the details\r\n            userId = objUser.userId; \r\n            onUpdateUser(userId, name, email, img , pswrd, appNumber); \r\n        }\r\n        else{ //create new user, full details\r\n            onCreate( userId, isAdmin, name, email, img , pswrd,  city, street,  stNumber, buildingName, buildingId, appNumber);\r\n        }\r\n        onBeforeClose();\r\n    }\r\n\r\n\r\n \r\n\r\n\r\n\r\n    //image file upload , handles the insert and the update \r\n    function handleFileChange(e) {\r\n        if (e.target.files.length === 1) {\r\n            // setImg(e.target.files[0]);\r\n            setImg(URL.createObjectURL(e.target.files[0]) ); \r\n        } else {\r\n            setImg(null);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <Modal show={show} onHide={onBeforeClose} size=\"lg\">\r\n            <Modal.Header closeButton>\r\n                <Modal.Title> {modalTitle} </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <Form>\r\n                    <Form.Group as={Row} controlId=\"UserName\">\r\n                        <Form.Label column sm={3}>\r\n                            Name\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"text\" placeholder=\"Full Name\" \r\n                                value={name} onChange={e => setName(e.target.value)}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Row} controlId=\"UserEmail\">\r\n                        <Form.Label column sm={3}>\r\n                            Email\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"email\" placeholder=\"E Mail\" \r\n                                value={email} onChange={e => setEmail(e.target.value)}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Row} controlId=\"UserPswd\">\r\n                        <Form.Label column sm={3}>\r\n                            User Password\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"text\" placeholder=\"Password\" \r\n                                value={pswd} onChange={e => setPswd(e.target.value)}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Row} controlId=\"UserAppartment\">\r\n                        <Form.Label column sm={3}>\r\n                            Appartment Nu.\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"number\" placeholder=\"Appartment Number\" \r\n                                value={appId} onChange={e => setAppId(e.target.value)}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Row} controlId=\"UserImg\">\r\n                        <Form.Label column sm={3}>\r\n                            User Image\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"file\" accept=\"image/*\" onChange={handleFileChange}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n                      {/* {objMsg.img !== \"\" ?  <Image src={objMsg.img}/>  :  <Image src={img ? URL.createObjectURL(img) : \"\"}/>  }                        \r\n                    */}\r\n                    <Image src={img} alt=\"\" className=\"imgAvatar\" />                        \r\n                              \r\n                </Form>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={onBeforeClose}>\r\n                    Cancel\r\n                </Button>\r\n                <Button variant=\"primary\" onClick={createUser}>\r\n                   Submit\r\n                </Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n}\r\n\r\nexport default NewUserModal;","//context\r\nimport { Redirect } from 'react-router';\r\nimport ActiveUserContext from '../../shared/activeUserContext';\r\nimport { useState, useContext  } from \"react\";\r\nimport { Button, Col, Container, Row , Image} from 'react-bootstrap';\r\nimport NewUserModal from '../../components/NewUserModal';\r\n\r\nfunction TenantsPage({users , onNewUser , onDeleteUser, onUpdateUser}){\r\n\r\n    const activeUser = useContext(ActiveUserContext);\r\n    const [filterText, setFilterText] = useState(\"\");\r\n\r\n    const [newUserModal, setNewUserModal] = useState(false);\r\n    const [user, setUserModal] = useState(\"\");\r\n  \r\n\r\n\r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n    if (activeUser.isAdmin === false){\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n\r\n \r\n\r\n    //filter users by name/email / appartment\r\n    let sortedUsers=\"\";\r\n    if (Array.isArray(users)){\r\n        sortedUsers = users.filter(user => \r\n            user.buildingId === activeUser.buildingId && user.isActive === 1 && (\r\n            user.name.toLowerCase().includes(filterText.toLowerCase()) || \r\n            user.email.toLowerCase().includes(filterText.toLowerCase()) ||\r\n            parseInt(user.appNumber) === parseInt(filterText)\r\n            )\r\n        );\r\n    }\r\n\r\n\r\n    function setUpdate(user){\r\n         setNewUserModal(true);\r\n         setUserModal(user); \r\n    }        \r\n\r\n\r\n    /*  send the message id to app.js to delete it as the array is \r\n        held with state handeling in app.js\r\n        onDeleteMsg - is sent as a prop from app.js and this func pointer receives \r\n        back the index sent to it\r\n    */\r\n    function onDeleteClick (userId){\r\n         onDeleteUser(userId); \r\n    }\r\n\r\n    \r\n\r\n\r\n    return (\r\n        <Container>\r\n            <h1>Tenants List</h1>\r\n\r\n            <Row>\r\n                <Col md={8}>\r\n                   <form className=\"d-flex\">\r\n                        <input type=\"text\" className=\"msgPageInput\"\r\n                                placeholder=\"Filter users by: name/email/appartment number\" \r\n                                value={filterText}\r\n                                onChange={e => setFilterText(e.target.value)}/>\r\n                  \r\n                    </form> \r\n                </Col>\r\n                <Col md={2}>\r\n                    {/* new user btn */}\r\n                      {activeUser.isAdmin ? <Button variant=\"outline-primary\"\r\n                            onClick={() => setUpdate(\"\")}>New User\r\n                            </Button> : null}\r\n                </Col>\r\n            </Row>\r\n\r\n             \r\n            {sortedUsers? sortedUsers.map((user)  => \r\n                <>\r\n                    <Row className=\"msgCards\" key={user.userId}  >\r\n                        <Col>\r\n                           \r\n                           {/* Update & delete message buttons */}\r\n                            <Row>\r\n                                {/* user details */}\r\n                                <Col xs={6} md={2}>\r\n                                        <h3>  {user.name} </h3>\r\n                                        <br/>\r\n                                        <Image src={user.img} rounded className=\"imgAvatar\" />\r\n                                </Col>\r\n                                <Col  xs={6} md={4}>\r\n                                        Email: <a href={`mailto:${user.email}`}>{user.email}</a> \r\n                                        <br/>\r\n                                        Appartment Number: {user.appNumber}\r\n                                </Col>\r\n\r\n                                {/* update & delete  btn  */}\r\n                                <Col xs={6} md={2}>\r\n                                    {activeUser.isAdmin ? \r\n                                        <Button className=\"btnUpdateMsg\" variant=\"primary\" size=\"sm\"\r\n                                            onClick={() => setUpdate(user) }>Update User\r\n                                        </Button> : null\r\n                                        }\r\n                                </Col>\r\n                            \r\n                                <Col xs={6} md={2}>\r\n                                        {activeUser.isAdmin ? \r\n                                            <Button variant=\"danger\" size=\"sm\"\r\n                                                onClick={() => onDeleteClick(user.userId)}>Delete User\r\n                                            </Button> : null\r\n                                        }\r\n                                </Col>\r\n                            </Row>\r\n\r\n                        </Col>\r\n                    </Row>\r\n                   \r\n                    </>\r\n                  \r\n                ) : null}\r\n\r\n          \r\n            {/* activate message modal      */}\r\n            <NewUserModal \r\n                show={newUserModal} \r\n                onClose={() => setNewUserModal(false)} \r\n                onCreate={onNewUser}\r\n                objUser = {user}                    \r\n                onUpdateUser = {onUpdateUser}\r\n                />\r\n                              \r\n\r\n        </Container>\r\n    )\r\n}\r\nexport default TenantsPage;","import SetCurrentDateTime from '../components/utils';\r\n\r\nexport default class VoteTicketModel {\r\n    constructor(singleVoteTicket) {\r\n         this.VoteTicketId  = singleVoteTicket.VoteTicketId; //PK \r\n         this.userId        = singleVoteTicket.userId;      //FK ( UserModel)\r\n         this.buildingId    = singleVoteTicket.buildingId; //FK (BuildingModel) \r\n         \r\n         if (singleVoteTicket.dateCreated === null){\r\n            this.dateCreated = SetCurrentDateTime(); //return string - current date/time\r\n        }\r\n         else{\r\n            this.dateCreated   =  singleVoteTicket.dateCreated;\r\n        }\r\n\r\n         this.title         = singleVoteTicket.title; \r\n         this.details       = singleVoteTicket.details; \r\n         \r\n        this.options       = singleVoteTicket.options; //array of strings \r\n\r\n         this.endDate       = singleVoteTicket.endDate; //the vote is no longer active after this date\r\n  \r\n        if (!singleVoteTicket.votes){\r\n            this.votes  = []; \r\n        }\r\n        else{\r\n            this.votes         = singleVoteTicket.votes;  //votes are related to options, see json for the example\r\n        }\r\n      \r\n        if ( !singleVoteTicket.status )\r\n        {\r\n            this.status= \"open\"; \r\n        }\r\n        else\r\n        {         \r\n            this.status        = singleVoteTicket.status; //open/close \r\n        }\r\n\r\n        if ( !singleVoteTicket.voteSummary )\r\n        {\r\n            this.voteSummary = 0 ; \r\n        }\r\n        else{\r\n            this.voteSummary   = singleVoteTicket.voteSummary; \r\n        }\r\n        \r\n    }\r\n}","import { useState } from \"react\";\r\n\r\nfunction SelectOptionsForVote({selectOptions, funcSetVoteFor}){\r\n    \r\n  \r\n    const [voteFor, setVoteFor] = useState(\"\"); \r\n\r\n \r\n    // useEffect(() => {  //without button\r\n\r\n    //     funcSetVoteFor(voteFor); \r\n        \r\n    //   }, [voteFor , funcSetVoteFor]);\r\n \r\n\r\n    function sendVote(e){\r\n        e.preventDefault(); \r\n        funcSetVoteFor(voteFor); \r\n    }\r\n\r\n\r\n\r\n    return(\r\n        <form className=\"selectOptionsForm\">\r\n            <span>Options for this Vote Ticket: </span>\r\n            \r\n            <select value={voteFor} \r\n                onChange={e => setVoteFor(e.target.value)}\r\n                className=\"form-control\">\r\n                <option>Select Options: </option>\r\n                {\r\n                    Array.isArray(selectOptions)  ? \r\n                            selectOptions.map((option) => (\r\n                            <option value={option}>{option}</option>\r\n                            ))\r\n                    :null\r\n                }        \r\n            </select>\r\n\r\n            <button onClick={sendVote}>Update Vote</button>    \r\n\r\n        </form>  \r\n    )\r\n\r\n}\r\n\r\nexport default SelectOptionsForVote; ","import { useState , useContext, useEffect } from \"react\";\r\nimport { Button, Row, Col, Form, Container} from \"react-bootstrap\"; \r\n\r\nimport VoteTicketModel from '../Model/VoteTicketModel'; \r\n\r\n//https://www.npmjs.com/package/react-datetime-picker\r\nimport DateTimePicker from 'react-datetime-picker';\r\n\r\n//context\r\nimport ActiveUserContext from '../shared/activeUserContext';\r\n\r\nimport SelectOptionsForVote from '../components/SelectOptionsForVote'; \r\n\r\nimport PieChartData from '../components/PieChartData'; \r\n\r\nfunction SingleVoteTicket({voteTicket, funcUpdateDate, funcUpdateVote, funcCloseTicket}){\r\n    \r\n    const activeUser = useContext(ActiveUserContext);\r\n    const [endDateValue, endDateOnChange] = useState(new Date());\r\n    \r\n    const [votedAlert, setVotedAlert] = useState(false); \r\n\r\n\r\n\r\n    //send app.js notice to close the ticket by admin's click\r\n    function closeTicket(voteTicket){\r\n        funcCloseTicket(voteTicket); \r\n    }\r\n   \r\n\r\n    //get selected vote from \"SelectOptionsForVote\" component\r\n    //prevent voting more then once per ticket\r\n    function funcGetVote(voteFor){\r\n  \r\n        let voted = false; \r\n        if (Array.isArray(voteTicket.votes))\r\n        {\r\n            const found = voteTicket.votes.find(vote => vote.userid === activeUser.userId) ; \r\n            if (found){\r\n                voted = true; \r\n                setVotedAlert(true);\r\n            }\r\n        }\r\n        if (voted === false){\r\n             //call upper level code to update the value \r\n            funcUpdateVote(voteFor, voteTicket);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    //every time the date changes, call uper level code to update the value\r\n    useEffect(() => {\r\n        if (funcUpdateDate){\r\n            funcUpdateDate(endDateValue,voteTicket ); \r\n        }\r\n \r\n      }, [endDateValue , funcUpdateDate, voteTicket]);\r\n \r\n\r\n   \r\n    return (\r\n        <Container className=\"singleVoteTicket\">\r\n         <Row >\r\n            <Col md={8} className=\"singleVoteTicketHeader\">\r\n                <h3>{voteTicket.title}</h3>\r\n            </Col>\r\n            \r\n            <Col  className=\"singleVoteTicketHeader\">\r\n                {activeUser.isAdmin && voteTicket.status === \"open\" ? \r\n                    <Button variant=\"danger\" size=\"sm\"\r\n                            onClick={() => closeTicket(voteTicket)}>\r\n                            Close Ticket\r\n                    </Button>\r\n                  :\r\n                  null\r\n              }    \r\n            </Col>\r\n              \r\n         </Row> \r\n\r\n\r\n        <Row >\r\n           <Col md={7} sm={12}>\r\n                    <strong>details:</strong> {voteTicket.details}\r\n                    <br/>\r\n                    <strong>End date:</strong> {  \r\n                        endDateValue.toLocaleString() >  new Date(voteTicket.endDate).toLocaleString() ? \r\n                        endDateValue.toLocaleString() : \r\n                        new Date(voteTicket.endDate).toLocaleString()  }\r\n\r\n                    {activeUser.isAdmin && voteTicket.status === \"open\" ? \r\n                        <>\r\n                        <br/>\r\n                        <strong>Update end date:</strong>\r\n                            <DateTimePicker\r\n                                onChange={endDateOnChange}\r\n                                value={endDateValue}\r\n                                minDate= {new Date(voteTicket.endDate)}\r\n                                \r\n                            />\r\n                        </>  \r\n                            : null} \r\n\r\n                    \r\n                      {/* present options to vote - for tenant   */}\r\n                      {votedAlert? <><br/><span className=\"text-danger\">You voted for this issue, please prevent for voting twice, your vote will not be counted</span></> : null}\r\n\r\n                      { voteTicket.status === \"open\" &&  Array.isArray(voteTicket.options)?   \r\n                            <SelectOptionsForVote \r\n                                    selectOptions={ voteTicket.options} \r\n                                    funcSetVoteFor= {funcGetVote}    \r\n                                    \r\n                             />\r\n                            :\r\n                            null\r\n                    }       \r\n                   \r\n                        \r\n            </Col>\r\n            <Col  md={5} sm={12}>\r\n                {Array.isArray(voteTicket.options) ? \r\n                <PieChartData entity={voteTicket} /> : null } \r\n            </Col>\r\n        </Row>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default SingleVoteTicket; ","import React, { useState } from 'react';\r\nimport { Button, Modal, Form, Col, Row } from 'react-bootstrap';\r\n\r\nimport SetCurrentDateTime from './utils';\r\n\r\nimport DateTimePicker from 'react-datetime-picker';\r\n \r\n\r\nfunction NewTicketModal({ show, onClose, onCreate , activeUserBuildingid, activeUserId}) {\r\n \r\n    const [title, setTitle] = useState(\"\");\r\n    const [details, setDetails] = useState(\"\");\r\n    const [endDateState, setEndDateState] = useState(new Date());\r\n \r\n\r\n    //handle dynamic options fields\r\n    const [arrOptions, setArrOptions] = useState([{ value: null }]);\r\n    \r\n    //option field changed\r\n    function handleChange(i, event) {\r\n      const values = [...arrOptions];\r\n      values[i].value = event.target.value;\r\n      setArrOptions(values);\r\n    }\r\n  \r\n    //user clicked + button \r\n    function handleAdd() {\r\n      const values = [...arrOptions];\r\n      values.push({ value: null });\r\n      setArrOptions(values);\r\n    }\r\n  \r\n    //user clicked X ( remove) button \r\n    function handleRemove(i) {\r\n      const values = [...arrOptions];\r\n      values.splice(i, 1);\r\n      setArrOptions(values);\r\n    }\r\n\r\n  \r\n    function onBeforeClose()\r\n    {\r\n        clearForm(); \r\n        onClose(); \r\n\r\n    }\r\n\r\n    let modalTitle = \"Create New Voting \"\r\n\r\n  \r\n    let  dateCreated = SetCurrentDateTime();\r\n \r\n \r\n    //clear form data   \r\n    function clearForm() {\r\n        setTitle(\"\");\r\n        setDetails(\"\");\r\n    }\r\n\r\n    //    \"votes\":[{\"userid\":1001, \"result\":\"yes\"  },{\"userid\":1002, \"result\":\"no\"  }, {\"userid\":1002, \"result\":\"no\"  } , {\"userid\":1002, \"result\":\"no\"  }  ], \r\n   \r\n\r\n\r\n\r\n    function createVote() {\r\n        let buildingId = activeUserBuildingid; // get building id\r\n        let userId = activeUserId;             // get current user id ( isAdmin)\r\n        let tempOptions = arrOptions; \r\n\r\n        console.log(arrOptions); \r\n        let tempArr=[];\r\n        tempOptions.forEach(element => {\r\n            tempArr.push(element.value); \r\n        });\r\n\r\n        let options = tempArr; \r\n\r\n\r\n        //2021-5-16 14:58:46\r\n\r\n        let datePart =\"\"; \r\n        let timePart = \"\"; \r\n\r\n        datePart = endDateState.getFullYear() + '-' + (endDateState.getMonth() + 1) + '-' + endDateState.getDate();\r\n        timePart = endDateState.getHours() + ':' + endDateState.getMinutes() + ':' + endDateState.getSeconds();\r\n\r\n        let endDate = datePart + \" \" + timePart; \r\n        \r\n      //VoteTicketId, userId, buildingId, dateCreated, title, details, options, endDate, votes, \"open\", 0\r\n        onCreate(userId, buildingId, dateCreated, title, details , options , endDate );\r\n        onBeforeClose();\r\n    }\r\n \r\n\r\n    return (\r\n        <Modal show={show} onHide={onBeforeClose} size=\"lg\">\r\n            <Modal.Header closeButton>\r\n                <Modal.Title> {modalTitle} </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <Form>\r\n                    <Form.Group as={Row} controlId=\"VoteTitle\">\r\n                        <Form.Label column sm={3}>\r\n                            Title\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"text\" placeholder=\"Vote title\" \r\n                                value={title} onChange={e => setTitle(e.target.value)}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Row} controlId=\"VoteDetails\">\r\n                        <Form.Label column sm={3}>\r\n                            Details\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"text\" placeholder=\"Vote details\" \r\n                                value={details} onChange={e => setDetails(e.target.value)}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n\r\n                    <Form.Group as={Row} controlId=\"VoteOptions\"> \r\n                        <Form.Label column sm={3}>\r\n                            Options\r\n                        </Form.Label>\r\n                        \r\n                        <Col sm={4}>\r\n                            {arrOptions.map((field, idx) => {\r\n                                return (\r\n                                <div key={`${field}-${idx}`}>\r\n                                    <input  className=\"dynamicOptionsInput\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter option\"\r\n                                    onChange={e => handleChange(idx, e)}\r\n                                    />\r\n                                     <Button variant=\"outline-danger\" \r\n                                        type=\"button\" onClick={() => handleRemove(idx)}>x</Button>\r\n                                </div>\r\n                                );\r\n                            })}\r\n\r\n                            <Button variant=\"outline-success\" \r\n                            type=\"button\" onClick={() => handleAdd()}\r\n                            >+</Button>\r\n                         \r\n                        </Col>\r\n                    </Form.Group>      \r\n\r\n                    <Form.Group as={Row} controlId=\"VoteOptions\">\r\n                        <Form.Label column sm={3}>\r\n                            End Date\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                             <DateTimePicker\r\n                                onChange={setEndDateState}\r\n                                value={endDateState}\r\n                                minDate= {new Date()}\r\n                                \r\n                            />\r\n                        </Col>\r\n                    </Form.Group>\r\n               </Form>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={onBeforeClose}>\r\n                    Cancel\r\n                </Button>\r\n                <Button variant=\"primary\" onClick={createVote}>\r\n                   Submit\r\n                </Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n}\r\n\r\nexport default NewTicketModal;","import { Redirect } from 'react-router';\r\nimport { useState, useContext  } from \"react\";\r\n\r\n//context\r\nimport ActiveUserContext from '../../shared/activeUserContext';\r\nimport { Button, Col, Container, Row } from 'react-bootstrap';\r\n\r\nimport SingleVoteTicket from '../../components/SingleVoteTicket'; \r\n\r\nimport NewTicketModal from '../../components/NewVoteTicketModal';\r\n\r\n\r\n\r\nfunction Votings({voteTickets , onNewTicket, onUpdateDate, onUpdateVote , funcCloseTicket}){\r\n\r\n    const activeUser = useContext(ActiveUserContext);\r\n    const [filterText, setFilterText] = useState(\"\");\r\n\r\n    //modal\r\n    const [newTicketModal, setNewTicketModal] = useState(false);\r\n  \r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n\r\n    let closedSortedTickets = voteTickets.filter(vote => \r\n        (vote.buildingId === activeUser.buildingId && vote.status === \"close\") &&\r\n            (\r\n                vote.title.toLowerCase().includes(filterText.toLowerCase()) || \r\n                vote.details.toLowerCase().includes(filterText.toLowerCase())\r\n            )\r\n        );\r\n\r\n\r\n    let openTickets = voteTickets.filter(vote => \r\n            (vote.buildingId === activeUser.buildingId && vote.status === \"open\") );\r\n\r\n\r\n\r\n            \r\n    function openNewVote(){\r\n        //open modal window\r\n        setNewTicketModal(true);\r\n    }\r\n\r\n\r\n    //UPDATE end date \r\n    function updateDate(updateDate , voteTicket){\r\n      //  console.log(updateDate); \r\n\r\n        \r\n        let datePart =\"\"; \r\n        let timePart = \"\"; \r\n\r\n        datePart = updateDate.getFullYear() + '-' + (updateDate.getMonth() + 1) + '-' + updateDate.getDate();\r\n        timePart = updateDate.getHours() + ':' + updateDate.getMinutes() + ':' + updateDate.getSeconds();\r\n\r\n        let endDate = datePart + \" \" + timePart; \r\n   \r\n      //  console.log(endDate);\r\n\r\n        voteTicket.endDate = endDate; \r\n\r\n        //call app.js to update\r\n        onUpdateDate(voteTicket); \r\n\r\n    }\r\n\r\n\r\n    //get vote option for ticket and pass it to app.js \r\n    function updateVote(voteFor, voteTicket){\r\n        onUpdateVote(voteFor, voteTicket); \r\n    }\r\n\r\n\r\n    function closeTicket(voteTicket){\r\n        funcCloseTicket(voteTicket); \r\n    }\r\n\r\n    return(\r\n        <Container>\r\n           \r\n               <Row>\r\n                   <Col sm={6} md={6}>\r\n                \r\n                    <h1>Active Votings</h1>  \r\n\r\n                     {/* Add new vote ticket btn */}\r\n                     {activeUser.isAdmin ? \r\n                            <Button variant=\"outline-primary\" style={{\"margin-bottom\": \"2vh\"}}\r\n                                    onClick={() => openNewVote()}>New Voting\r\n                            </Button> : null}\r\n\r\n                      {/* Loop over OPEN voteTickets array and each time present -  Single */}\r\n\r\n                      {openTickets? openTickets.map((openVoteTicket)  => \r\n                            <SingleVoteTicket \r\n                                voteTicket={openVoteTicket} \r\n                                funcUpdateDate={updateDate} \r\n                                funcUpdateVote={updateVote}\r\n                                funcCloseTicket={closeTicket}\r\n                                >\r\n\r\n                            </SingleVoteTicket>\r\n                         \r\n                         ) : \"There are no open votes\" }\r\n                   </Col>\r\n\r\n              \r\n              \r\n                   <Col>\r\n                        <h1>Votings Results</h1>\r\n\r\n                        {/* filer box */}\r\n                        <form className=\"d-flex\">\r\n                            <input type=\"text\" className=\"msgPageInput\"\r\n                                placeholder=\"Filter by text in title and details\" \r\n                                value={filterText}\r\n                                onChange={e => setFilterText(e.target.value)}/>\r\n                        </form>\r\n\r\n                        {/* Loop over CLOSED  voteTickets array and each time present -  Single */}\r\n\r\n                        {closedSortedTickets? closedSortedTickets.map((closedVoteTicket)  => \r\n                            <SingleVoteTicket voteTicket={closedVoteTicket} ></SingleVoteTicket>\r\n                         \r\n                         ) : \"There are no closed votes\" }\r\n                         \r\n                   </Col> \r\n\r\n               </Row>\r\n\r\n           \r\n\r\n\r\n            {/* activate new vote ticket  modal  */}   \r\n            <NewTicketModal \r\n                show={newTicketModal} \r\n                onClose={() => setNewTicketModal(false)} \r\n                onCreate={onNewTicket}\r\n                activeUserBuildingid={activeUser.buildingId}\r\n                activeUserId = {activeUser.userId}\r\n            />\r\n\r\n\r\n        </Container>\r\n         \r\n       \r\n    )\r\n}\r\n\r\nexport default Votings;","import React , {useContext} from 'react';\r\nimport {Navbar, Nav} from 'react-bootstrap'; \r\nimport logo from '../assets/images/logo.png';\r\n\r\n//context\r\nimport ActiveUserContext from '../shared/activeUserContext';\r\n \r\nimport { useLocation } from 'react-router-dom';\r\n \r\n\r\nfunction SiteNavBar( {onLogout} ){\r\n\r\n    const activeUser = useContext(ActiveUserContext);\r\n\r\n    let  checkIfAdmin = false; \r\n\r\n    if (activeUser)\r\n    {\r\n        checkIfAdmin = activeUser.isAdmin; \r\n    }\r\n   \r\n    const location = useLocation() //get current relative path, like /tenants\r\n    \r\n\r\n\r\n    return(\r\n      \r\n        <Navbar sticky=\"top\" collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\">\r\n        <Navbar.Brand href=\"#/\"><img src={logo} alt=\"logo\"/></Navbar.Brand>\r\n        <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n        <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n        <Nav  \r\n            className=\"mr-auto\">\r\n            {/* show navigaion menu only for registered users admin/tenant */}\r\n            {activeUser ? <Nav.Link href=\"#/dashboard\">DashBoard</Nav.Link> : null}\r\n            {/* Tenants pages is only for admins */}\r\n            {checkIfAdmin === true? <Nav.Link href=\"#/tenants\">Tenants</Nav.Link> : null}\r\n            {activeUser? <Nav.Link href=\"#/messages\">Messages</Nav.Link> : null}\r\n            {activeUser? <Nav.Link href=\"#/votings\">Voting</Nav.Link>: null}\r\n        </Nav>\r\n        <Nav>\r\n            {!activeUser ? <Nav.Link href=\"#/login\">Login</Nav.Link> : null}\r\n            {!activeUser ? <Nav.Link href=\"#/signup\" className=\"signupBtn\">Signup</Nav.Link> : null}\r\n            {activeUser ? <Nav.Link href=\"#\" onClick={() => onLogout()}>Logout</Nav.Link> : null}\r\n            {activeUser?  <Nav.Link href=\"#\">{activeUser.name},  {activeUser.isAdmin === true ? \"Admin\" : \"Tenant\"}</Nav.Link> :null}\r\n            \r\n        </Nav>\r\n        </Navbar.Collapse>\r\n        </Navbar>\r\n    )\r\n}\r\n\r\nexport default SiteNavBar; ","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAADaElEQVR4nO2bW0gUURjH/2fcjTTt1d21J7NezB6MxFiU1PLFhyKswBtBQg9FbxHRhaGEoqCHkHooItNdyEwKtKALgrZ4ZTUvQWVvuhcf0zRQ5/SwpenMujuns2dWZn6wMHu+Of/55g/nmzkfuwSckGVZyssvrCaS4uKlqQVVpMCYv88jy7LCQ8/GQwQA9u4rqAFoEyjhJakJIRR5+YUA0MxDT+IhAgAUJJuXVkwI3clLipsBmxXLAKMTMBrTG6CrZF+4cqN8bnbuPAhVGbctLW1X6tbUHH6pRWfh18Lkz/n5b6oAJUp6Rvq9Ow1X38arpesxODn5vWN2ds6uZ06CyPnzUbE9I70cwJZ4hXQtgSS5+Q35oTNH5hehk5VHWacmhGdtL5nmMRtQf6qadWpCYDXA9E8B0xugWgLtnZ27oUhHtB519x88FpPVf9Le8fqiapASBZLy6lhFxdd/h9U1QJHeAMhO9K4uoVByS3Nckc5g3eNTawmI29WJR7WLNH0NML0B3DpClFJ86OoBAJSVFIEQIjTOCjcD3nd14/bdxpXvh0qLhcZZ4bYEgqHwynEgFBIeZ8X0NYCbAXbb6mqy29UbskTHWeFmQJH7AFzOTLicmSh2FwqPs8KtCO7IcqLpYaNhcVasGmB0AkZjGcBLaGo6iNrTZ1FXfw7TgaDwOCvcDOjx9SIUnkEwFEa3r094nBVuBiwuLa0eLy4Kj7Ni1QBeQi6HY+U4y+kQHmeF24tQZIsaOS49WCQ8zgo3AwghKCuJvkVNdJwVqwYYnYDRWC0xLiqwWmJWS2yzYrXEeAlZLTGrJbY5sQwwOgGj4VYDpqaDuHStAYQQ3Lx+GVkup2Y8FJ7ZUMfpyNxwfjR9VoS3xGJhipZYTC2BLTFuS0APtVXHUVd1Ys3YU28rmr3PhecirCWWrPrCWmLJqi+sJZas+qZ/D7AMMDoBo7EMMDoBo7HJsiz5BiaqQagLAPzDn5YJSEqsiXr/oDDx+Yuuc1n/AAEAw8OjmuMUdPlwRWXkl+SUBNwFuR7bx6HxGhA0/T2pr38oros8euJhTjAW/pFR+Ee0byIeevsHo4VSAER+SU4ofAMTkIhCKPOVGGnxttaSdbR42upE5wGiUJu7INfjGxyjFGSPkGuCjrv353nfdb5YM25UHr8BM0n3fXKSONMAAAAASUVORK5CYII=\"","import { Container } from \"react-bootstrap\";\r\n\r\nfunction Footer(){\r\n    return(\r\n        <footer>\r\n            <Container>\r\n                <a href=\"mailto:iritstempler@gmail.com\">Contact us</a>\r\n            </Container>\r\n             \r\n        </footer>\r\n    )\r\n}\r\nexport default Footer;","export default class UserModel {\r\n    constructor(SingleUser) {\r\n        this.userId     = SingleUser.userId; //PK\r\n        this.isAdmin    = SingleUser.isAdmin //true/false\r\n        this.name       = SingleUser.name;\r\n        this.email      = SingleUser.email;\r\n        this.img        = SingleUser.img;\r\n        this.pswrd      = SingleUser.pswrd;\r\n        this.city       = SingleUser.city;\r\n        this.street     = SingleUser.street;\r\n        this.stNumber   = SingleUser.stNumber;\r\n        this.buildingName = SingleUser.buildingName;\r\n        this.buildingId   = SingleUser.buildingId;  //FK   \r\n        this.appNumber      = SingleUser.appNumber; //number\r\n\r\n        if ( !this.isActive ){\r\n            this.isActive = 1;  //1 = active user, 0 = deleted user\r\n        }\r\n        else\r\n        {\r\n            this.isActive =  SingleUser.isActive; \r\n        }\r\n    }\r\n\r\n    \r\n    login(email, pwd) {\r\n        return email.toLowerCase() === this.email.toLowerCase() && pwd === this.pswrd;\r\n    }\r\n}","export default class BuildingModel {\r\n    constructor(SingleBuilding) {\r\n        this.buildingId = SingleBuilding.buildingId //PK. FK in all other entities\r\n        this.userId  = SingleBuilding.userId ; //FK, (UserModel), is the admin of this building, can be only one\r\n        this.userEmail = SingleBuilding.userEmail; //identify the user\r\n        this.buildingName = SingleBuilding.buildingName;\r\n        this.city = SingleBuilding.city;\r\n        this.street = SingleBuilding.street;\r\n        this.stNumber = SingleBuilding.stNumber;\r\n    }\r\n}","export default class MessageModel {\r\n    constructor(singleMessage) {\r\n        this.messageId  = singleMessage.messageId;  //PK \r\n        this.buildingId = singleMessage.buildingId; //FK (BuildingModel)\r\n        this.userId     = singleMessage.userId;     //FK (UserModel)\r\n      \r\n        this.dateCreated   =  singleMessage.dateCreated;\r\n      \r\n        this.title      = singleMessage.title; \r\n        this.details    = singleMessage.details;\r\n\r\n        if (singleMessage.priority === null){\r\n            this.priority  = \"Info\";\r\n        }\r\n        else{\r\n            this.priority   = singleMessage.priority;   // Important / Info ( default) \r\n        }\r\n       \r\n        if  (singleMessage.img ){ //we have img \r\n            this.img        = singleMessage.img; \r\n        }\r\n        else{\r\n            this.img  = \"images/msgDefault.jpg\";\r\n        }\r\n        this.ArrayCommentsId = singleMessage.ArrayCommentsId; //array \r\n    }\r\n}","import { HashRouter, Route, Switch } from 'react-router-dom';\nimport { Redirect } from 'react-router';\n\nimport { useState } from 'react';\n// components\nimport Dashboard from './pages/Dashboard/Dashboard';\nimport HomePage from './pages/HomePage/HomePage';\nimport LoginPage from './pages/LoginPage/LoginPage';\nimport SignUp from './pages/SignUpPage/SignUp';\nimport Messages from './pages/MessagesPage/Messages';\nimport TenantsPage from './pages/TenantsPage/Tenants';\nimport Votings from './pages/VotingsPage/Votings';\nimport SiteNavBar from './components/SiteNavBar';\nimport Footer from './components/Footer';\n//css\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\n//data\nimport usersJSON from './data/users.json';\nimport buildinsJSON from './data/buildings.json';\nimport messagesJSON from './data/messages.json';\nimport voteTicketsJSON from './data/votesTickets.json'\n\n//data model\nimport UserModel from './Model/UserModel'; \nimport buildingModel from './Model/BuildingModel'; \nimport MessageModel from './Model/MessageModel';\nimport VoteTicketModel from './Model/VoteTicketModel'\n\n//context\nimport ActiveUserContext from './shared/activeUserContext';\n\n\n\n\nfunction App() {\n\n // const pathPre = process.env.PUBLIC_URL;\n\n  //check dummi user:\n  //const dummyUser= {userId:1, isAdmin:true, name:\"irit\", email:\"iritstempler@gmail.com\", pswrd:\"123\", adrs:\"Beit Hashmonai\", buildingName:\"Elazar\", buildingId:1, appNumber:5}\n\n  //******** Define local memory arrays to use with JSON local files********\n  // USERS\n  const[users, setUsers] = useState(usersJSON.map(user => new UserModel(user)));\n  // BUILDINGS\n  const[buildings, setBuildings] = useState(buildinsJSON.map (building => new buildingModel(building)) ); \n  //MESSAGES\n  const[messages, setMessages] = useState(messagesJSON.map (message => new  MessageModel(message)) ) ;\n  //VOTE TICKETS JSON\n  const[voteTickets, setVoteTickets]  = useState(voteTicketsJSON.map (voteTicket => new  VoteTicketModel(voteTicket)) ) ;\n\n  //State \n  const [activeUser, setActiveUser] = useState(null);\n\n\n  //Try to find if there is an admin in the building: \n  function checkUser(email, buildingName) {\n    for (var i in users) {\n        if ((users[i].email === email) && (users[i].buildingName === buildingName) && (users[i].isAdmin)){\n           //alert - is admin in this building name  and break \n           console.log(\"building name = \" + users[i].buildingName + \" email = \" + users[i].email + \" is admin = \" + users[i].isAdmin );\n      \n           return true; \n                     \n        }\n        else //ok, create new\n        {\n            console.log(\"user ok\");\n            return false; \n        }\n    }\n}\n\n\n//ADD NEW -  building\nfunction addBuilding(userId, userEmail, buildingName, city, street, stNumber){\n  //create new building id\n  let buildingId = buildings[buildings.length - 1].buildingId + 1; \n  \n  const newBuilding = new buildingModel({\n    buildingId,\n    userId,\n    userEmail,\n    buildingName,\n    city,\n    street,\n    stNumber\n  });\n\n  setBuildings(buildings.concat(newBuilding));\n\n  return   buildingId; \n}\n\n\nfunction newUser(userId, isAdmin, name, email, img , pswrd,  city, street,  stNumber, buildingName, buildingId, appNumber){\n  \n  if (userId === 0){\n    userId =  users[users.length - 1].userId + 1; \n  }\n\n  const newUser = new UserModel({\n    userId,\n    isAdmin,\n    name,\n    email,\n    img,\n    pswrd, \n    city, \n    street,\n    stNumber,\n    buildingName,\n    buildingId,\n    appNumber\n  });\n  \n  //check if is in users array with this building name as admin\n  let ifExist = false; \n\n  ifExist = checkUser(email, buildingName); \n\n  if (ifExist === false){\n    //update users array\n    setUsers(users.concat(newUser));\n  \n  }\n\n \n}\n\n\n  //ADD NEW : admin user\n  function addUser(isAdmin, name, email, img, pswrd, city, street, stNumber, buildingName,  appNumber) {\n   \n    let buildingId =\"\"; \n    let userId = \"\"; \n\n    userId =  users[users.length - 1].userId + 1; \n\n     \n    buildingId = addBuilding(userId, email, buildingName, city, street, stNumber); \n    \n    newUser(userId, isAdmin, name, email, img , pswrd,  city, street,  stNumber, buildingName, buildingId, appNumber);\n    \n    return userId; \n  }\n\n \n  /*********************USERS (tenants) ********************************* */\n  function createNewUser( userId, isAdmin, name, email, img , pswrd,  city, street,  stNumber, buildingName, buildingId, appNumber){\n      //console.log(\"app js - createNewUser\"); \n\n      newUser(userId, isAdmin, name, email, img , pswrd,  city, street,  stNumber, buildingName, buildingId, appNumber);\n  }\n\n\n  function updateUser(userId, name, email, img , pswrd, appNumber){\n       \n    let userPos = users.findIndex(user => user.userId === userId); //index in array \n\n    const usersClone = [...users];\n  \n    usersClone[userPos].name=name; \n    usersClone[userPos].email=email;\n    usersClone[userPos].img=img; \n    usersClone[userPos].pswrd=pswrd;\n    usersClone[userPos].appNumber=appNumber;\n\n    setUsers(usersClone);\n  }\n\n\n  //mark user as not active\n  function deleteUser(userId){\n    \n    //console.log(userId); \n    //find the user in users array \n    \n    let userPos = users.findIndex(user => user.userId === userId); //index in array \n\n    const usersClone = [...users];\n  \n    usersClone[userPos].isActive = 0; \n\n    setUsers(usersClone);\n  }\n\n\n\n\n\n  /**************MESSAGES SECTION : INSERT, UPDATE, DELETE ***************** */\n\n  //INSERT\n  function insertNewMessage(buildingId,userId,  dateCreated, title, details, priority, img){\n      console.log(\"addNewMsg\");\n      \n      let messageId = 10001;\n      \n      if(messages){\n        messageId =  messages[messages.length-1].messageId + 1;\n      }\n\n      const addNewMsg = new MessageModel({\n        messageId,\n        buildingId,\n        userId, \n        dateCreated, \n        title,\n        details, \n        priority,\n        img\n        \n      });\n    \n      setMessages(messages.concat(addNewMsg));\n  \n  }\n\n\n  //UPDATE\n  function updateMessage(messageId, title, details, priority, img){\n    //1. find message id in the array of messages\n    let index = messages.findIndex(msg => msg.messageId === messageId);\n    //console.log(\"result==> \"+ index);\n\n    //2. update existing obj with new form data from user \n    if (index){\n      messages[index].title = title; \n      messages[index].details = details; \n      messages[index].priority = priority; \n      messages[index].img = img; \n\n      setMessages(messages); \n    }\n\n  }\n\n\n\n  //add or update a message\n  function addNewMsg(messageId, buildingId,userId,  dateCreated, title, details, priority, img){\n    console.log(\"messageId ===> \" + messageId); \n\n      if (!messageId){\n        insertNewMessage(buildingId,userId,  dateCreated, title, details, priority, img); \n      }\n      else{\n        console.log(\"update message ==> \"); \n\n        updateMessage(messageId, title, details, priority, img); \n      }\n  }\n\n  //DELETE message by message id\n  function deleteMsg(msgID){\n    let userAnswer = false; \n\n    //confirm doesnt work, window.confirm - works\n    userAnswer = window.confirm(\"Delete message No. \" + msgID + \"?\");\n   \n    if (userAnswer === true){ //clicked yes \n       //get position in array \n       let msgToDeletePos = messages.findIndex(msg => msg.messageId === msgID);\n\n       //if we have position \n      if (msgToDeletePos){\n          const msgAfterDel = messages.filter(msg => msg.messageId !== msgID);\n          setMessages(msgAfterDel); \n      }\n    }\n\n  }\n\n  //update single message with new comment \n  function updateCommentsForMessage(comment, message){\n  \n    let msgId = message.messageId; //msg id\n\n    let msgPos = messages.findIndex(msg => msg.messageId === msgId); //index in array \n   \n    const messagesClone = [...messages]; \n    \n    if (messagesClone[msgPos].ArrayCommentsId){ //push new obj to exiting array \n      messagesClone[msgPos].ArrayCommentsId.push(comment); \n    }\n    else{ //create new object , there is no array \n      messagesClone[msgPos].ArrayCommentsId = [{\n                                              \"dateCreated\":comment.dateCreated, \n                                              \"userId\": comment.userId,\n                                              \"buildingId\": comment.buildingId,\n                                              \"commentText\": comment.commentText\n                                           }] ; \n    }\n  \n    setMessages(messagesClone);\n\n  }\n\n/********************END MESSAGES SECTION*********************** */\n\n\n\n\n/********************VOTING SECTION ***************************** */\n\nfunction addNewVoteTicket(userId, buildingId, dateCreated, title, details , options , endDate ){\n  console.log(\"Insert new vote ticket\"); \n  console.log (userId +\",\"+ buildingId +\",\"+ dateCreated +\",\"+ title +\",\"+ details +\",\"+ options +\",\"+ endDate); \n\n\n  let VoteTicketId = 10001;\n      \n  if(voteTickets){\n    VoteTicketId =  voteTickets[voteTickets.length-1].VoteTicketId + 1;\n  }\n\n  const addNewVote = new VoteTicketModel({\n    VoteTicketId,\n    userId, \n    buildingId,\n    dateCreated, \n    title,\n    details, \n    options,\n    endDate\n    \n  });\n\n  setVoteTickets(voteTickets.concat(addNewVote));\n  console.log(voteTickets); \n\n}\n\n//UPDATE ticket end date\nfunction updateEndDate (voteTicket){\n  let ticketId  = voteTicket.VoteTicketId; //vote ticket id\n\n  let ticketPos = voteTickets.findIndex(vote => vote.VoteTicketId === ticketId); //index in array \n\n  voteTickets[ticketPos].endDate = voteTicket.endDate; \n\n  setVoteTickets(voteTickets);\n}\n\n\n//UPDATE ticket - new user's VOTE option\nfunction updateVoteOptionsArray (voteFor, voteTicket){\n  let ticketId  = voteTicket.VoteTicketId; //vote ticket id\n\n  let ticketPos = voteTickets.findIndex(vote => vote.VoteTicketId === ticketId); //index in array \n\n  const voteTicketsClone  = [...voteTickets];\n\n  if (Array.isArray(voteTicketsClone[ticketPos].votes)){\n    voteTicketsClone[ticketPos].votes.push({\"userid\": activeUser.userId, \"result\":voteFor });\n  }\n  else{\n    voteTicketsClone[ticketPos].votes = [ {\"userid\": activeUser.userId, \"result\":voteFor } ]; \n  }\n\n  setVoteTickets(voteTicketsClone);\n}\n\n\nfunction closeVoteTicket (voteTicket){\n  let ticketId  = voteTicket.VoteTicketId; //vote ticket id\n\n  let ticketPos = voteTickets.findIndex(vote => vote.VoteTicketId === ticketId); //index in array \n\n  const voteTicketsClone = [...voteTickets]; \n\n  voteTicketsClone[ticketPos].status=\"close\";\n\n  setVoteTickets(voteTicketsClone);\n}\n\n/*******************END VOTING SECTION*************************** */\n\n\n  return (\n    <ActiveUserContext.Provider value={activeUser}> \n    \n      \n       <HashRouter>\n       <SiteNavBar   onLogout={() => setActiveUser(null)}/>\n          <Switch>\n              <Route exact path=\"/\"><HomePage/></Route>\n              <Route exact path=\"/login\">\n                  <LoginPage  \n                    users={users} \n                    onLogin={user => setActiveUser(user)}/>\n              </Route>\n              <Route exact path=\"/signup\">\n                  <SignUp onNewUser={addUser} />\n              </Route>\n              <Route exact path=\"/tenants\">\n                  <TenantsPage \n                    users={users}\n                    onNewUser={createNewUser}\n                    onDeleteUser = {deleteUser}\n                    onUpdateUser = {updateUser}\n                    />\n              </Route>\n              <Route exact path=\"/messages\">\n                  <Messages \n                    messages={messages} \n                    users={users} \n                    onNewMessage={addNewMsg}  \n                    onDeleteMsg={deleteMsg} \n                    onUpdateComment={updateCommentsForMessage}\n                  />\n              </Route>\n              <Route exact path=\"/votings\">\n                <Votings \n                  voteTickets={voteTickets} \n                  onNewTicket={addNewVoteTicket}\n                  onUpdateDate={updateEndDate}\n                  onUpdateVote={updateVoteOptionsArray}\n                  funcCloseTicket={closeVoteTicket}\n                  />\n              </Route>\n              <Route exact path=\"/dashboard\">\n                <Dashboard  \n                  voteTickets={voteTickets} \n                  />\n              </Route>\n          </Switch>\n       </HashRouter>\n   \n    <Footer/>\n\n    </ActiveUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}