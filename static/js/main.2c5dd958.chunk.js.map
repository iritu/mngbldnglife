{"version":3,"sources":["components/PieChartData.js","shared/activeUserContext.js","pages/Dashboard/Dashboard.js","pages/HomePage/HomePage.js","pages/LoginPage/LoginPage.js","pages/SignUpPage/SignUp.js","components/utils.js","Model/CommentModel.js","shared/pathPreContext.js","components/SingleMessage.js","components/NewMsgModal.js","pages/MessagesPage/Messages.js","components/NewUserModal.js","pages/TenantsPage/Tenants.js","components/SelectOptionsForVote.js","components/SingleVoteTicket.js","components/NewVoteTicketModal.js","pages/VotingsPage/Votings.js","components/SiteNavBar.js","assets/images/logo.png","components/Footer.js","components/Contact.js","pages/Contact/ContactPage.js","pages/Tickets/Tickets.js","Model/UserModel.js","Model/BuildingModel.js","Model/MessageModel.js","Model/VoteTicketModel.js","Model/TicketsModel.js","App.js","reportWebVitals.js","index.js"],"names":["PieChartData","entity","arrLabels","options","arrVotes","votes","arrDataPie","noOfVotes","length","backgroundColor","borderColor","setBgColor","setBorderColor","index","push","Array","isArray","i","forEach","label","result","reduce","counter","obj","countResults","data","labels","datasets","borderWidth","responsive","ActiveUserContext","createContext","Dashboard","voteTickets","activeUser","useContext","to","checkIfAdmin","votesArray","arrVoteTickets","isAdmin","filter","ticket","buildingId","status","Container","Nav","Link","className","href","Row","Col","map","voteTicket","md","sm","HomePage","pathPre","process","Jumbotron","fluid","xs","Image","src","alt","LoginPage","users","onLogin","useState","email","setEmail","pswd","setPswd","nonUser","setNonUser","style","marginTop","maxWidth","Form","onSubmit","e","preventDefault","user","login","Alert","variant","Group","controlId","Control","type","placeholder","value","onChange","target","Button","block","SignUp","onNewUser","name","setName","buildingName","setBuildingName","city","setCity","img","setImg","street","setStreet","streetNu","setStreetNu","appNu","setAppNu","appNewUser","setAppNewUser","as","Label","accept","files","URL","createObjectURL","onClick","testNewUser","console","log","SetCurrentDateTime","today","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","CommentModel","singleComment","dateCreated","this","userId","commentText","pathPreTemp","window","location","includes","pathPreContext","SingleMessage","message","updateMessage","newComment","setNewComment","imgPath","title","priority","rounded","width","height","details","messageId","ArrayCommentsId","parse","commentsArray","returnStr","userName","cmntDate","userImg","cmnt","userPos","findIndex","showCommentsForMessage","newCommentObj","rows","size","NewMsgModal","show","onClose","onCreate","activeUserBuildingid","activeUserId","objMsg","setTitle","setDetails","setPriority","objState","setObjState","objMsgId","setMsgId","typeName","modalTitle","onBeforeClose","useEffect","Modal","onHide","Header","closeButton","Title","Body","column","option","Footer","ticketId","Messages","messages","onNewMessage","onDeleteMsg","onUpdateComment","newMsgeModal","setNewMsgeModal","setMsgModal","filterText","setFilterText","sortBy","setSortBy","sortedMessages","msg","toLowerCase","setUpdate","funcUpdateMessage","comment","sort","msg1","msg2","msgID","NewUserModal","objUser","onUpdateUser","appId","setAppId","pswrd","appNumber","stNumber","TenantsPage","onDeleteUser","showNewUserModal","setShowNewUserModal","setUserModal","sortedUsers","isActive","parseInt","SelectOptionsForVote","selectOptions","funcSetVoteFor","voteFor","setVoteFor","SingleVoteTicket","funcUpdateDate","funcUpdateVote","funcCloseTicket","endDateValue","endDateOnChange","votedAlert","setVotedAlert","closeTicket","toLocaleString","endDate","minDate","voted","find","vote","userid","NewTicketModal","endDateState","setEndDateState","arrOptions","setArrOptions","field","idx","event","values","handleChange","splice","handleRemove","handleAdd","tempOptions","tempArr","element","datePart","timePart","Votings","onNewTicket","onUpdateDate","onUpdateVote","newTicketModal","setNewTicketModal","closedSortedTickets","openTickets","updateDate","updateVote","openVoteTicket","closedVoteTicket","SiteNavBar","onLogout","useLocation","setActive","navLink","pathname","Navbar","sticky","collapseOnSelect","expand","bg","Brand","Toggle","Collapse","id","activeKey","ContactComponent","toSend","setToSend","showDetails","setShowDetails","htmlFor","required","ContactPage","Contact","Tickets","issues","onUpdateCommentIssue","updateIssueStatus","openModal","setOpenModal","issue","setIssueModal","setStatus","issuesArr","issueItem","a","b","paddingBottom","Accordion","Card","eventKey","confirm","UserModel","SingleUser","pwd","BuildingModel","SingleBuilding","userEmail","MessageModel","singleMessage","VoteTicketModel","singleVoteTicket","VoteTicketId","voteSummary","TicketModel","singleTicket","App","usersJSON","setUsers","buildinsJSON","building","buildingModel","buildings","setBuildings","messagesJSON","setMessages","voteTicketsJSON","setVoteTickets","ticketsJSON","ticketsArr","setTicketsArr","setActiveUser","newUser","ifExist","checkUser","concat","Provider","exact","path","newBuilding","addBuilding","Tenants","usersClone","addNewMsg","insertNewMessage","msgAfterDel","msgId","msgPos","messagesClone","addNewVote","ticketPos","voteTicketsClone","tck","TicketsClone","updateTicket","addNewTicket","insertNewTicket","issuePos","issueClone","strStatus","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2c5dd958.chunk.js","sourcesContent":["import { Pie } from 'react-chartjs-2';\r\nimport React from 'react';\r\n\r\n\r\nfunction PieChartData({entity}){\r\n\r\n    //get labels : \"options\": [\"yes\" , \"no\"]\r\n    let arrLabels = entity.options; \r\n    let arrVotes = entity.votes; \r\n    let arrDataPie = [];\r\n\r\n    let noOfVotes = arrVotes.length; \r\n\r\n    let backgroundColor= [\r\n        'rgba(255, 99, 132, 0.2)',\r\n        'rgba(54, 162, 235, 0.2)',\r\n        'rgba(255, 206, 86, 0.2)',\r\n        'rgba(75, 192, 192, 0.2)',\r\n        'rgba(153, 102, 255, 0.2)',\r\n        'rgba(255, 159, 64, 0.2)',\r\n      ]; \r\n\r\n    let  borderColor= [\r\n        'rgba(255, 99, 132, 1)',\r\n        'rgba(54, 162, 235, 1)',\r\n        'rgba(255, 206, 86, 1)',\r\n        'rgba(75, 192, 192, 1)',\r\n        'rgba(153, 102, 255, 1)',\r\n        'rgba(255, 159, 64, 1)',\r\n      ] ; \r\n      \r\n\r\n     let setBgColor=[];\r\n     let setBorderColor = []; \r\n     \r\n     \r\n     for (let index = 0; index < arrLabels.length; index++) {\r\n        setBgColor.push(backgroundColor[index]); \r\n        setBorderColor.push(borderColor[index]); \r\n     }\r\n\r\n\r\n\r\n    //get data from votes:\r\n    // \"votes\":[  {\"userid\":1001, \"result\":0  }, {\"userid\":1002, \"result\":0 }  ]\r\n    \r\n    /**\r\n     * \r\n     * @param {*} label \r\n     * @param {*} arrVotes \r\n     * @returns : count (int) \r\n     */\r\n    function countResults(label, arrVotes){\r\n      const count = arrVotes.reduce((counter, obj) => obj.result === label ? counter += 1 : counter, 0); // 6\r\n      //console.log(count);\r\n      return count; \r\n    }\r\n\r\n \r\n    /**\r\n     * \r\n     * for each label ( like: yes/no etc)\r\n     * count ( func countResults() ) how many occurance are found in votes array.\r\n     * arrVotes is obj array and use reduce to preserve the orige array.\r\n     * each time the counting come back with result > 0 \r\n     * it is placed in the new created dynamically array - arrDataPie and it's index is incremented-\r\n     * which is the data for the pie.\r\n     * \r\n     */\r\n    if ( Array.isArray(arrLabels)  )  {\r\n      let i=0; \r\n      arrLabels.forEach(label => {\r\n      let result=0; \r\n      result = countResults(label, arrVotes); \r\n      if (result > 0 )\r\n      {\r\n        arrDataPie[i] = result; \r\n        i++; \r\n      }\r\n    });\r\n  } \r\n\r\n    const data = {\r\n        labels: arrLabels,  //['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],\r\n        datasets: [\r\n          {\r\n            label: noOfVotes + '# of Votes', //not showing\r\n            data: arrDataPie, //[12, 19, 3, 5, 2, 3], //arrDataPie\r\n            backgroundColor:setBgColor,\r\n            borderColor: setBorderColor,\r\n            borderWidth: 1\r\n          },\r\n        ],\r\n        options: {\r\n          //Customize chart options\r\n          responsive: true,\r\n        }\r\n      \r\n      };\r\n\r\n     return  (\r\n        <>\r\n         <strong>Voting Percentage</strong>\r\n          <Pie data={data} />\r\n        </>\r\n      );\r\n\r\n}\r\n\r\n\r\nexport default PieChartData; ","import {createContext} from 'react';\r\n\r\nconst ActiveUserContext = createContext(null);\r\n\r\nexport default ActiveUserContext;","import { Container , Nav , Row, Col} from \"react-bootstrap\";\r\nimport React , {useContext} from 'react';\r\nimport { Redirect } from 'react-router';\r\nimport PieChartData from '../../components/PieChartData'; \r\n \r\n\r\n//context\r\nimport ActiveUserContext from '../../shared/activeUserContext';\r\n\r\nfunction Dashboard({voteTickets}){\r\n\r\n    const activeUser = useContext(ActiveUserContext);\r\n\r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n\r\n    let  checkIfAdmin = false; \r\n    let votesArray = []; \r\n    let arrVoteTickets=[];\r\n\r\n    if (activeUser)\r\n    {\r\n        checkIfAdmin = activeUser.isAdmin; \r\n    }\r\n\r\n   \r\n    //display votes for current user&building\r\n    if(voteTickets){\r\n      arrVoteTickets = voteTickets.filter(ticket =>  ticket.buildingId === activeUser.buildingId);\r\n    }\r\n \r\n    \r\n\r\n    if (arrVoteTickets){\r\n        arrVoteTickets.forEach(ticket => {\r\n            if (ticket.status === \"open\" ) {\r\n                votesArray.push(ticket)   ; \r\n            }   \r\n        });\r\n    }    \r\n\r\n    \r\n\r\n    return(\r\n        <Container>\r\n            <h1>Dashboard</h1>\r\n\r\n            {checkIfAdmin === true? <Nav.Link  className=\"btnLink\" href=\"#/tenants\">Add New Tenants</Nav.Link> : null}\r\n        \r\n            <>\r\n            <Row className=\"dashboardPieRow\">\r\n                <Col>   <h3>Open voting tickets results </h3> </Col>\r\n            </Row>\r\n            <Row >\r\n            {votesArray.map((voteTicket, index) => {\r\n                return (\r\n                    <Col md={3} sm={6} key={index}>   \r\n                      \r\n                            <PieChartData entity={voteTicket} />  \r\n                            \r\n                     \r\n                    </Col>\r\n                    );\r\n                })}\r\n            </Row>\r\n            </>\r\n        </Container>\r\n        )\r\n}\r\n\r\nexport default Dashboard;","import {Jumbotron, Container, Row, Col, Image} from 'react-bootstrap';\r\n\r\nfunction HomePage(){\r\n\r\n    const pathPre = process.env.PUBLIC_URL; //define server path\r\n\r\n    return(\r\n        <>\r\n            <Jumbotron fluid className=\"Jumbotron\">\r\n                <h1 className=\"HomePageHeader\">\r\n                Homeowner Association Management System\r\n                </h1>\r\n            </Jumbotron>\r\n           \r\n            <div className=\"homePageMain\">\r\n                   <h1 className=\"secondPHomePage\">\r\n                       Who we are\r\n                   </h1>\r\n                   <section className=\"homePageSectionText\">\r\n                        Communication between tenants and homeowner committee can be chalenging task.\r\n                        <br/>\r\n                        Our aim is to ease the process and automate it simplifying the flow\r\n                        of Communication.\r\n                        <br/>\r\n                        Though there are many WhatsUp groups for that matter,our added value is\r\n                        <br/>\r\n                         to maintain \r\n                        and visualize the issues. \r\n                   </section>\r\n            </div>\r\n\r\n\r\n            <Container>\r\n                    <Row className=\"homePageRow\">\r\n                        <Col xs={12} md={4}>\r\n                            <h2>Comitee member</h2>\r\n                            <span className=\"hpText\">\r\n                                <br/>\r\n                                Committee member role is to add and remove tenant members, create votings, and remove/create message on the message board.\r\n                                <br/>\r\n                                There is only one committee member per building. \r\n                            </span>\r\n                        </Col>\r\n                        <Col xs={12} md={4}>\r\n                            <Image src={pathPre + \"/images/city-homepage-project.png\"}  fluid  alt=\"\"></Image>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    <Row className=\"homePageRow2\">\r\n                        <Col xs={12} md={4}>\r\n                           <Image src= {pathPre + \"/images/city-homepage-2.png\"} fluid  alt=\"\"></Image>\r\n                        </Col>\r\n                        <Col xs={12} md={4}>\r\n                            <h2>\r\n                              Tenants\r\n                            </h2>\r\n                            <span className=\"hpText\">\r\n                                <br/>\r\n                                Can view and participate: Vote on issues you care, View messages of your building, \r\n                                Report, manage and view issues.\r\n                            </span>\r\n                        </Col>\r\n                    </Row>\r\n          </Container>\r\n         \r\n        </>\r\n    )\r\n}\r\n\r\nexport default HomePage;","import { useState, useContext } from \"react\";\r\nimport { Form ,  Button, Alert, Row, Col} from \"react-bootstrap\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\n\r\n\r\n//context\r\nimport ActiveUserContext from '../../shared/activeUserContext';\r\n\r\nfunction LoginPage({users, onLogin}){\r\n\r\n    const activeUser = useContext(ActiveUserContext);\r\n\r\n    const [email, setEmail] = useState(\"\");\r\n    const [pswd, setPswd] = useState(\"\");\r\n    const [nonUser, setNonUser]= useState(false);\r\n\r\n    if (activeUser) {\r\n        return <Redirect to=\"/dashboard\"/>\r\n    }\r\n\r\n    function login(e) {\r\n        e.preventDefault();\r\n\r\n        let activeUser = null;\r\n        \r\n        for (const user of users) {\r\n            if (user.login(email, pswd)) { //if exists\r\n                activeUser = user;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (activeUser) {\r\n            onLogin(activeUser);\r\n        } else {\r\n            setNonUser(true);\r\n        }\r\n    }\r\n\r\n\r\n     return (\r\n        <div style={{marginTop:20}}>\r\n      \r\n            <h1 className=\"loginHeader\">Login to HOA system </h1>\r\n      \r\n            <Row>\r\n                <Col sm={12} md={6} className=\"divCenter\">\r\n                    <h2 className=\"loginHeader\">  New? &nbsp; <Link to=\"/signup\">Create a new account</Link></h2>\r\n                </Col>\r\n            </Row>\r\n      \r\n            <Row>\r\n                <Col sm={12} md={8} className=\"divCenter\" style={{marginTop:10, maxWidth:650}}>\r\n                        <Form className=\"loginForm\" onSubmit={login}>\r\n                    \r\n                            {nonUser? <Alert variant=\"danger\">Invalid credentials</Alert> : null}\r\n\r\n                            <Form.Group controlId=\"formBasicEmail\">\r\n                                <Form.Control type=\"email\" placeholder=\"Enter email\"\r\n                                value={email} onChange={e=> setEmail(e.target.value)} />\r\n                            </Form.Group>\r\n\r\n                            <Form.Group controlId=\"formBasicPassword\">\r\n                                <Form.Control type=\"password\" placeholder=\"Password\" \r\n                                value={pswd} onChange={e=> setPswd(e.target.value)}/>\r\n                            </Form.Group>\r\n                            \r\n                            <Button className=\"submitForm\" type=\"submit\" block>\r\n                                Login\r\n                            </Button>\r\n                    </Form>\r\n                </Col>\r\n            </Row>\r\n               \r\n               \r\n        </div>\r\n    )\r\n}\r\nexport default LoginPage;","import { useState } from \"react\";\r\nimport { Form ,  Button, Col, Row, Image } from \"react-bootstrap\";\r\nimport { Redirect } from 'react-router';\r\n\r\nfunction SignUp({onNewUser}){\r\n\r\n    const [email, setEmail]               = useState(\"\");\r\n    const [name, setName]                 = useState(\"\");\r\n    const [pswd, setPswd]                 = useState(\"\");\r\n    const [buildingName, setBuildingName] = useState(\"\");\r\n    const [city, setCity]                 = useState(\"\");\r\n    const [img, setImg] = useState(null);\r\n    const [street, setStreet]             = useState(\"\");\r\n    const [streetNu, setStreetNu]         = useState(\"\");\r\n    const [appNu, setAppNu]               = useState(\"\");\r\n\r\n    const [appNewUser, setAppNewUser]     = useState(\"\");\r\n     \r\n\r\n   if (appNewUser){\r\n    return <Redirect to=\"/login\" />;\r\n   }\r\n\r\n\r\n    function createNewUser() {\r\n        console.log(\"sign up - createNewUser \"); \r\n        let isAdmin = true; \r\n        let  testNewUser = \"\"; \r\n\r\n        testNewUser = onNewUser(isAdmin, name, email, img ? URL.createObjectURL(img) : \"\",  pswd, city, street, streetNu, buildingName,  appNu );\r\n\r\n        if (testNewUser){\r\n            setAppNewUser(testNewUser); \r\n        }\r\n    }\r\n\r\n\r\n    function handleFileChange(e) {\r\n        if (e.target.files.length === 1) {\r\n            setImg(e.target.files[0]);\r\n        } else {\r\n            setImg(null);\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className=\"signUpPage\">\r\n            <h1 className=\"loginHeader divCenter\">Create a Committee Member Account (Admin) </h1>\r\n           \r\n           \r\n            <Form className=\"loginForm\" > \r\n                <h3>Personal details</h3>\r\n                <Form.Group as={Row} controlId=\"SignUpName\">\r\n                   <Form.Control type=\"text\" placeholder=\"Full name:\"\r\n                   value={name} onChange={e=> setName(e.target.value)} />\r\n                </Form.Group>\r\n\r\n                <Form.Group as={Row}  controlId=\"SignUpPassword\">\r\n                   <Form.Control type=\"password\" placeholder=\"Password\" \r\n                   value={pswd} onChange={e=> setPswd(e.target.value)}/>\r\n                </Form.Group>\r\n\r\n               <Form.Group as={Row} controlId=\"SignUpEmail\">\r\n                   <Form.Control type=\"email\" placeholder=\"Enter email\"\r\n                   value={email} onChange={e=> setEmail(e.target.value)} />\r\n               </Form.Group>\r\n\r\n            \r\n               <h3>Building details</h3>\r\n                <Form.Group as={Row} controlId=\"SignUpBuildingName\">\r\n                   <Form.Control type=\"text\" placeholder=\"Building identifier name:\"\r\n                   value={buildingName} onChange={e=> setBuildingName(e.target.value)} />\r\n                </Form.Group>\r\n\r\n\r\n                <Row>\r\n                    <Col sm={12} md={4}>\r\n                        <Form.Group as={Row} controlId=\"SignUpCity\">\r\n                            <Form.Control type=\"text\" placeholder=\"City:\"\r\n                            value={city} onChange={e=> setCity(e.target.value)} />\r\n                        </Form.Group>\r\n                    </Col>\r\n                    <Col sm={12}  md={4}>\r\n                        <Form.Group as={Row} controlId=\"SignUpstreet\">\r\n                         <Form.Control type=\"text\" placeholder=\"street:\"\r\n                          value={street} onChange={e=> setStreet(e.target.value)} />\r\n                        </Form.Group>\r\n                    </Col>\r\n                    <Col sm={12}  md={4}>\r\n                        <Form.Group as={Row} controlId=\"SignUpstreetNu\">\r\n                          <Form.Control type=\"number\" placeholder=\"street Number:\"\r\n                          value={streetNu} onChange={e=> setStreetNu(e.target.value)} />\r\n                        </Form.Group>\r\n                    </Col>\r\n                </Row>\r\n\r\n\r\n                <Form.Group as={Row} controlId=\"SignUpAppNu\">\r\n                   <Form.Control type=\"number\" placeholder=\"Appartment Number:\"\r\n                   value={appNu} onChange={e=> setAppNu(e.target.value)} />\r\n                </Form.Group>\r\n\r\n               \r\n\r\n                <Form.Group as={Row} controlId=\"formFile\" className=\"formInput\">\r\n                    <Form.Label  className=\"custom-file-upload\">Upload your Image</Form.Label>\r\n                    <Form.Control type=\"file\" accept=\"image/*\" onChange={handleFileChange} />\r\n                </Form.Group>\r\n\r\n                <Image src={img ? URL.createObjectURL(img) : \"\"}/>\r\n\r\n                <Button className=\"submitForm\" type=\"submit\" onClick={createNewUser} block>\r\n                   Sign Up\r\n               </Button>\r\n            </Form>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SignUp;","function SetCurrentDateTime(){\r\n        let  today = new Date();  \r\n        let  time = \"\"; \r\n        let  date = \"\";\r\n        let msgCreatedAt = \"\"; \r\n\r\n        date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();\r\n        time = today.getHours() + ':' + today.getMinutes() + ':' + today.getSeconds();\r\n\r\n        msgCreatedAt =  date + \" \" + time; \r\n\r\n        return msgCreatedAt;\r\n}\r\n\r\nexport default SetCurrentDateTime; \r\n\r\n ","import SetCurrentDateTime from '../components/utils';\r\n\r\nexport default class CommentModel {\r\n\r\n    constructor(singleComment) {\r\n        \r\n        if (singleComment.dateCreated === null){\r\n            this.dateCreated = SetCurrentDateTime(); //return string - current date/time\r\n        }\r\n        else{\r\n            this.dateCreated   =  singleComment.dateCreated;\r\n        }\r\n        \r\n        this.userId        =  singleComment.userId;        //FK (UserModel)\r\n        this.buildingId    =  singleComment.buildingId;    //FK. (BuildingModel)\r\n        this.commentText   =  singleComment.commentText; \r\n    }\r\n}","import {createContext} from 'react';\r\n\r\nlet pathPreTemp=\"\";\r\n\r\nif ( (window.location.href).includes('localhost')  ){\r\n    pathPreTemp = process.env.PUBLIC_URL;\r\n    pathPreTemp += \"/\";  \r\n}\r\n\r\nconst pathPreContext = createContext( pathPreTemp ) ; \r\n\r\nexport default pathPreContext;","import { useState , useContext } from \"react\";\r\nimport { Button, Row, Col, Image , Form} from \"react-bootstrap\"; \r\n\r\n\r\nimport CommentModel from '../Model/CommentModel';\r\nimport SetCurrentDateTime from '../components/utils';\r\n\r\n//string to html react parser (npm install)\r\nimport parse from 'html-react-parser';\r\nimport ActiveUserContext from '../shared/activeUserContext';\r\nimport pathPreContext from '../shared/pathPreContext'; \r\n\r\nfunction SingleMessage({users, message, updateMessage, type=0}){\r\n\r\n    //form, get new comment\r\n    const [newComment, setNewComment] = useState(\"\");\r\n    \r\n    //constants\r\n    const activeUser = useContext(ActiveUserContext);\r\n    const pathPre = useContext(pathPreContext);\r\n\r\n    let img = \"\"; \r\n    img =  message.img;  //default img for message\r\n \r\n    let imgPath = \"\";\r\n    if (img.includes('blob')){ imgPath = img }else{ imgPath=pathPre+img } //handle live/localhost path \r\n   \r\n    //const imgSrc = pathPre+ \"/\" + img; \r\n\r\n    function saveComment(e){\r\n        e.preventDefault();\r\n        //alert(newComment);\r\n\r\n        let dateCreated = SetCurrentDateTime(); \r\n        let userId = activeUser.userId; \r\n        let buildingId = message.buildingId; \r\n        let commentText = newComment; \r\n\r\n        const  newCommentObj = new CommentModel({\r\n            dateCreated,\r\n            userId,\r\n            buildingId,\r\n            commentText\r\n        });\r\n\r\n        //re - render message obj\r\n        updateMessage(newCommentObj , message);\r\n   }\r\n\r\n    //get array of comments and return string combined from \r\n    //<ul> text (comments) items \r\n    //caller uses parse() to extract returned string to html\r\n    function showCommentsForMessage(commentsArray){\r\n        let returnStr = \"\"; \r\n        let userName =\"\"; \r\n        let cmntDate = \"\"; \r\n        let userImg = \"\"; \r\n        \r\n        if(commentsArray){\r\n            returnStr = \"<ul>\"; \r\n        \r\n            commentsArray.forEach(cmnt => {\r\n                cmntDate = cmnt.dateCreated; \r\n\r\n                if (cmnt.userId){\r\n                    //find user\r\n                    let userPos = users.findIndex(user => user.userId === cmnt.userId); //index in array \r\n                    userName = users[userPos].name; \r\n                    userImg = users[userPos].img; \r\n                    returnStr += \"<li><img class='avatarIcon' src=\"+pathPre+userImg+\" /><span class='cmntHeaderTxt'>\"+ userName +\"@\"+cmntDate+\"</span><br/>\" + cmnt.commentText + \"</li>\" ; \r\n                }\r\n                else\r\n                {\r\n                    returnStr += \"<li><span class='cmntHeaderTxt'>\"+ cmnt.userId +\"@\"+cmntDate+\"</span><br/>\" + cmnt.commentText + \"</li>\" ; \r\n                }\r\n             });\r\n\r\n            returnStr += \"</ul>\";\r\n        }\r\n        return   returnStr;\r\n    }\r\n\r\n\r\n\r\n    return(\r\n       <Row>\r\n           <Col xs={12} md={6} className=\"msgCardsCol\">\r\n                 <h5>{message.title}    {type === 1? <>--- <b>Status: </b>{message.status} </> : null }</h5>\r\n              \r\n                 <strong>Priority: </strong> {message.priority}\r\n                 <br/>\r\n              \r\n                {type === 0? \r\n                    <Image src={imgPath} rounded className=\"imgAvatar\" alt={message.title} />   //message\r\n                    :\r\n                    <><Image src={imgPath} width=\"300\" height=\"300\" alt={message.title} /> <br/>  </>     //ticket ( uploaded: {img},  preloaded {pathPre+img})\r\n                }\r\n                 <strong>Details: </strong> {message.details}\r\n                   \r\n            </Col>\r\n\r\n           <Col xs={12} md={6}>\r\n             <h5>Comments</h5>\r\n              Message ID: {message.messageId}\r\n                       \r\n              {message.ArrayCommentsId?  parse(showCommentsForMessage(message.ArrayCommentsId))   : \"\"} \r\n \r\n               {/* in tickets,  only admin can add a comment, messages - all.     */}\r\n               { activeUser.isAdmin || type === 0 ? \r\n                    <Form onSubmit={saveComment}>\r\n                        <Form.Group controlId={`commentMsg${message.messageId}`}>\r\n                        <Form.Control as=\"textarea\" rows={3}\r\n                                value={newComment}\r\n                                onChange={e => setNewComment(e.target.value)}\r\n                                placeholder= \"Add new comment\"\r\n                            />\r\n                        </Form.Group>\r\n                        <Button variant=\"secondary\" size=\"sm\" type=\"submit\">Add Comment</Button>\r\n                    </Form>  \r\n                : null}\r\n            </Col>\r\n       </Row>\r\n\r\n   \r\n    )\r\n}\r\n\r\nexport default  SingleMessage; ","import React, { useEffect, useState } from 'react';\r\nimport { Button, Modal, Form, Col, Row, Image } from 'react-bootstrap';\r\n\r\nimport SetCurrentDateTime from './utils';\r\n\r\n// if objMsg is passed than it is an update process, else it is an insert process\r\n// Component modal to works with messages and tickets (issues). ( issue is a type of message )\r\n\r\nfunction NewMsgModal({ show, onClose, onCreate , activeUserBuildingid, activeUserId, objMsg, type=0}) {\r\n \r\n    const [title, setTitle] = useState(\"\");\r\n    const [details, setDetails] = useState(\"\");\r\n    const [priority, setPriority] = useState(\"Info\");\r\n    const [img, setImg] = useState(\"\");\r\n\r\n    const [objState, setObjState] = useState(null);\r\n    const [objMsgId , setMsgId] = useState(\"\"); \r\n\r\n    let  typeName =\"Message\";  //default \r\n\r\n    if (type === 1 ){\r\n            typeName = \"Ticket\";\r\n    }\r\n   \r\n\r\n    let modalTitle = \"Create New \" + typeName;\r\n\r\n    if (objMsg){\r\n        modalTitle= \"Update \" + typeName;\r\n    }\r\n\r\n    function onBeforeClose()\r\n    {\r\n        clearForm(); \r\n        onClose(); //don't show\r\n    }\r\n\r\n    // get the message object data on load \r\n    useEffect(() => {\r\n        setTitle(objMsg.title); \r\n        setDetails(objMsg.details); \r\n        setPriority(objMsg.priority); \r\n        setImg(objMsg.img); \r\n        setMsgId(objMsg.messageId)\r\n         \r\n      }, [objMsg, objState]); \r\n    \r\n  \r\n    let  dateCreated = SetCurrentDateTime();\r\n\r\n    // define select box options of priority\r\n    const selectPriorityOptions = [\r\n        {\r\n          name: \"Info\",\r\n          value: \"Info\",\r\n        },\r\n        {\r\n          name: \"Important\",\r\n          value: \"Important\",\r\n        }\r\n      ];\r\n\r\n\r\n    //clear form data   \r\n    function clearForm() {\r\n        setTitle(\"\");\r\n        setDetails(\"\");\r\n        setPriority(\"Info\")\r\n        setImg(null);\r\n        setMsgId(\"\");\r\n        setObjState(null); \r\n    }\r\n\r\n\r\n    function createMsg() {\r\n        let buildingId = activeUserBuildingid; // get building id\r\n        let userId = activeUserId;             // get current user id ( isAdmin)\r\n\r\n        let messageId = objMsgId;  //if messageId != null -> update, else -> insert \r\n        let ticketId = objMsg.ticketId;             \r\n\r\n        if (type === 1 ){\r\n            //new ticket\r\n            onCreate(ticketId, buildingId, userId,  dateCreated, title, details, priority, img , \"\");\r\n        }\r\n        else{\r\n            //messageId; create new message id from last item of msg array\r\n            onCreate(messageId, buildingId,userId,  dateCreated, title, details, priority, img , \"\");\r\n        }\r\n     \r\n        onClose(); \r\n    }\r\n\r\n\r\n    //image file upload , handles the insert and the update \r\n    function handleFileChange(e) {\r\n        if (e.target.files.length === 1) {\r\n            // setImg(e.target.files[0]);\r\n            setImg(URL.createObjectURL(e.target.files[0]) ); \r\n        } else {\r\n            setImg(null);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <Modal show={show} onHide={onBeforeClose} size=\"lg\">\r\n            <Modal.Header closeButton>\r\n                <Modal.Title> {modalTitle} </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <Form>\r\n                    <Form.Group as={Row} controlId=\"MsgTitle\">\r\n                        <Form.Label column sm={3}>\r\n                            Title\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"text\" placeholder=\"Issue title\" \r\n                                value={title} onChange={e => setTitle(e.target.value)}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Row} controlId=\"MsgDetails\">\r\n                        <Form.Label column sm={3}>\r\n                            Details\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"text\" placeholder=\"Issue details\" \r\n                                value={details} onChange={e => setDetails(e.target.value)}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Row} controlId=\"MsgPriority\">\r\n                        <Form.Label column sm={3}>\r\n                            Priority\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                             <Form.Control as=\"select\" value={priority}   \r\n                                    onChange={e => setPriority(e.target.value)}>\r\n                                    {selectPriorityOptions.map((option) => (\r\n                                    <option \r\n                                        key={option.value}  \r\n                                        value={option.value}>{option.name}\r\n                                    </option>\r\n                                    ))}\r\n                             </Form.Control>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n\r\n                    <Form.Group as={Row} controlId=\"MsgImg\">\r\n                        <Form.Label column sm={3}>\r\n                            {typeName} Image\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"file\" accept=\"image/*\" onChange={handleFileChange}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n                      {/* {objMsg.img !== \"\" ?  <Image src={objMsg.img}/>  :  <Image src={img ? URL.createObjectURL(img) : \"\"}/>  }                        \r\n                    */}\r\n                    <Image src={img} alt=\"\" className=\"imgAvatar\" />                        \r\n                              \r\n                </Form>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={onBeforeClose}>\r\n                    Cancel\r\n                </Button>\r\n                <Button variant=\"primary\" onClick={createMsg}>\r\n                   Submit\r\n                </Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n}\r\n\r\nexport default NewMsgModal;","import { Redirect } from 'react-router';\r\nimport { useState, useContext  } from \"react\";\r\nimport SingleMessage from '../../components/SingleMessage';\r\nimport { Button, Col, Container, Row } from 'react-bootstrap';\r\n\r\n//context\r\nimport ActiveUserContext from '../../shared/activeUserContext';\r\nimport NewMsgModal from '../../components/NewMsgModal';\r\n\r\nfunction Messages({messages, users, onNewMessage, onDeleteMsg, onUpdateComment}){\r\n    \r\n    const activeUser = useContext(ActiveUserContext);\r\n    \r\n    const [newMsgeModal, setNewMsgeModal] = useState(false);\r\n    const [message, setMsgModal] = useState(\"\");\r\n    const [filterText, setFilterText] = useState(\"\");\r\n    const [sortBy, setSortBy] = useState(\"dateCreated\");\r\n\r\n   \r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n    \r\n   \r\n      \r\n    // 1) Filter the messages based on the filterText\r\n    //    make sure that the messages presenter are for the building id of the active user  \r\n    let sortedMessages = messages.filter(msg => \r\n        msg.buildingId === activeUser.buildingId && (\r\n        msg.title.toLowerCase().includes(filterText.toLowerCase()) || \r\n        msg.details.toLowerCase().includes(filterText.toLowerCase())));\r\n\r\n    //  console.log(\"messages js - sortedMessages array:\")    \r\n    //  console.log (sortedMessages);\r\n\r\n    // 2) Sort the messages  array\r\n    sortedMessages.sort(\r\n            (msg1, msg2) => {\r\n                if (msg1[sortBy] > msg2[sortBy]) {\r\n                    return 1;\r\n                } \r\n                else if (msg1[sortBy] < msg2[sortBy]) {\r\n                    return -1;\r\n                }    \r\n                else {\r\n                    return 0;\r\n                }\r\n            }\r\n            );\r\n\r\n    \r\n            \r\n    function setUpdate(message){\r\n        setNewMsgeModal(true);\r\n        setMsgModal(message); \r\n    }        \r\n\r\n\r\n    /*  send the message id to app.js to delete it as the array is \r\n        held with state handeling in app.js\r\n        onDeleteMsg - is sent as a prop from app.js and this func pointer receives \r\n        back the index sent to it\r\n    */\r\n    function onDeleteClick (msgID){\r\n        onDeleteMsg(msgID); \r\n    }\r\n\r\n \r\n    //pass cller (app.js ) by local func \r\n    function funcUpdateMessage(comment, message){\r\n   \r\n        onUpdateComment(comment, message); \r\n        \r\n    }\r\n\r\n    return(\r\n       <Container>\r\n            <h1>Messages </h1>\r\n            <br/>\r\n            <Row>\r\n                <Col md={8} sm={12}>\r\n                   <form className=\"d-flex\">\r\n                        <input type=\"text\" className=\"msgPageInput\"\r\n                                placeholder=\"Filter Messages by text in title and details\" \r\n                                value={filterText}\r\n                                onChange={e => setFilterText(e.target.value)}/>\r\n                        <select value={sortBy} \r\n                                onChange={e => setSortBy(e.target.value)}\r\n                                className=\"form-control\">\r\n                                <option value=\"dateCreated\">Filter by: Date Created</option>\r\n                                <option value=\"priority\">Filter by: Priority</option>\r\n                        </select>\r\n                                    \r\n                    </form> \r\n                </Col>\r\n                <Col md={2} sm={12}>\r\n                    {/* new msg btn */}\r\n                      {activeUser.isAdmin ? <Button variant=\"outline-primary\"\r\n                                        onClick={() => setUpdate(\"\")}>New Message\r\n                                        </Button> : null}\r\n                </Col>\r\n            </Row>\r\n\r\n       \r\n           \r\n            {sortedMessages.map((message, index)  => \r\n                <>\r\n                    <Row className=\"msgCards\" key={message.messageId}  >\r\n                        <Col>\r\n                           \r\n                           {/* Update & delete message buttons */}\r\n                            <Row >\r\n                                    <Col xs={6} md={2}>\r\n                                    {/* update msg btn  */}\r\n                                    {activeUser.isAdmin ? \r\n                                        <Button className=\"btnUpdateMsg\" variant=\"primary\" size=\"sm\"\r\n                                            onClick={() => setUpdate(message) }>Update Message\r\n                                        </Button> : null\r\n                                        }\r\n                                    </Col>\r\n                            \r\n                                    <Col xs={6} md={2}>\r\n                                        {activeUser.isAdmin ? \r\n                                            <Button variant=\"danger\" size=\"sm\"\r\n                                                onClick={() => onDeleteClick(message.messageId)}>Delete Message\r\n                                            </Button> : null\r\n                                            \r\n                                        }\r\n                                    </Col>\r\n                            </Row>\r\n\r\n                            {/* show single message with its comments */}           \r\n                            <SingleMessage \r\n                                users={users}\r\n                                message={message} \r\n                                updateMessage={funcUpdateMessage} />\r\n                              \r\n\r\n                        </Col>\r\n                    </Row>\r\n                    \r\n                   \r\n                    </>\r\n                )}\r\n           \r\n\r\n            {/* activate message modal      */}\r\n            <NewMsgModal \r\n                show={newMsgeModal} \r\n                onClose={() => setNewMsgeModal(false)} \r\n                onCreate={onNewMessage}\r\n                activeUserBuildingid={activeUser.buildingId}\r\n                activeUserId = {activeUser.userId}\r\n                objMsg = {message}                    \r\n                \r\n                />\r\n\r\n\r\n       </Container>\r\n    )\r\n}\r\n\r\nexport default Messages;","import React, { useEffect, useState , useContext} from 'react';\r\nimport { Button, Modal, Form, Col, Row, Image } from 'react-bootstrap';\r\nimport ActiveUserContext from '../shared/activeUserContext';\r\n\r\n/*\r\n    only admin can create users so active user here is admin, \r\n    since admin and tenant are in the \r\n    same building, all the details of the building are \r\n    taken from the activeUser object\r\n*/ \r\n\r\nfunction NewUserModal({ show, onClose, onCreate , objUser , onUpdateUser}) {\r\n \r\n    const activeUser = useContext(ActiveUserContext);\r\n\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [img, setImg] = useState(\"\");\r\n    const [appId, setAppId] = useState(\"\");\r\n    const [pswd, setPswd] =  useState(\"\");\r\n    const [objState, setObjState] = useState(null);\r\n    \r\n\r\n    let modalTitle = \"Create New Tenant \" //new user\r\n\r\n    if (objUser){\r\n        modalTitle= \"Update Tenant\"\r\n    }\r\n     \r\n\r\n    function onBeforeClose()\r\n    {\r\n        clearForm(); \r\n        onClose(); \r\n\r\n    }\r\n\r\n\r\n\r\n    // get the user  object data on load \r\n    useEffect(() => {\r\n        if (objUser){\r\n            setName(objUser.name); \r\n            setEmail(objUser.email); \r\n            setPswd(objUser.pswrd); \r\n            setImg(objUser.img); \r\n            setAppId(objUser.appNumber)\r\n        }\r\n      }, [objUser, objState]); \r\n    \r\n  \r\n    \r\n    //clear form data   \r\n    function clearForm() {\r\n        setName(\"\");\r\n        setEmail(\"\");\r\n        setPswd(\"\"); \r\n        setImg(null);\r\n        setAppId(\"\");\r\n        setObjState(null); \r\n    }\r\n\r\n\r\n    function createUser() {\r\n      \r\n        let userId = 0;\r\n        let pswrd = pswd; \r\n        let isAdmin=\"false\"; \r\n        let city = activeUser.city; \r\n        let street = activeUser.street; \r\n        let stNumber = activeUser.stNumber;\r\n        let buildingName = activeUser.buildingName; \r\n        let buildingId = activeUser.buildingId; \r\n        let appNumber = appId;\r\n\r\n\r\n        if (objUser){ //existing user, just update the details\r\n            userId = objUser.userId; \r\n            onUpdateUser(userId, name, email, img , pswrd, appNumber); \r\n        }\r\n        else{ //create new user, full details\r\n            onCreate( userId, isAdmin, name, email, img , pswrd,  city, street,  stNumber, buildingName, buildingId, appNumber);\r\n        }\r\n        onBeforeClose();\r\n    }\r\n\r\n\r\n \r\n\r\n\r\n\r\n    //image file upload , handles the insert and the update \r\n    function handleFileChange(e) {\r\n        if (e.target.files.length === 1) {\r\n            // setImg(e.target.files[0]);\r\n            setImg(URL.createObjectURL(e.target.files[0]) ); \r\n        } else {\r\n            setImg(null);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <Modal show={show} onHide={onBeforeClose} size=\"lg\">\r\n            <Modal.Header closeButton>\r\n                <Modal.Title> {modalTitle} </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <Form>\r\n                    <Form.Group as={Row} controlId=\"UserName\">\r\n                        <Form.Label column sm={3}>\r\n                            Name\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"text\" placeholder=\"Full Name\" \r\n                                value={name} onChange={e => setName(e.target.value)}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Row} controlId=\"UserEmail\">\r\n                        <Form.Label column sm={3}>\r\n                            Email\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"email\" placeholder=\"E Mail\" \r\n                                value={email} onChange={e => setEmail(e.target.value)}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Row} controlId=\"UserPswd\">\r\n                        <Form.Label column sm={3}>\r\n                            User Password\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"text\" placeholder=\"Password\" \r\n                                value={pswd} onChange={e => setPswd(e.target.value)}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Row} controlId=\"UserAppartment\">\r\n                        <Form.Label column sm={3}>\r\n                            Appartment Nu.\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"number\" placeholder=\"Appartment Number\" \r\n                                value={appId} onChange={e => setAppId(e.target.value)}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Row} controlId=\"UserImg\">\r\n                        <Form.Label column sm={3}>\r\n                            User Image\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"file\" accept=\"image/*\" onChange={handleFileChange}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n                      {/* {objMsg.img !== \"\" ?  <Image src={objMsg.img}/>  :  <Image src={img ? URL.createObjectURL(img) : \"\"}/>  }                        \r\n                    */}\r\n                    <Image src={img} alt=\"\" className=\"imgAvatar\" />                        \r\n                              \r\n                </Form>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={onBeforeClose}>\r\n                    Cancel\r\n                </Button>\r\n                <Button variant=\"primary\" onClick={createUser}>\r\n                   Submit\r\n                </Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n}\r\n\r\nexport default NewUserModal;","//context\r\nimport { Redirect } from 'react-router';\r\nimport ActiveUserContext from '../../shared/activeUserContext';\r\nimport { useState, useContext  } from \"react\";\r\nimport { Button, Col, Container, Row , Image} from 'react-bootstrap';\r\nimport NewUserModal from '../../components/NewUserModal';\r\nimport pathPreContext from '../../shared/pathPreContext'; \r\n\r\n/**\r\n * TenantsPage: display exisiting tenants, activates the new user ( tenant ) modal, send to app.js \r\n * the \"onDeleteUser\" , \"onUpdateUser\" to activate the correspondind delete/ update functions \r\n * as the arrays are handled in app.js and it goes up the hierarchy of files to the caller to handle the data.\r\n * @param {*} users array,  onNewUser: function property ( activated in app.js) , onDeleteUser: function property, onUpdateUser: function property\r\n */\r\n\r\nfunction TenantsPage({users , onNewUser , onDeleteUser, onUpdateUser}){\r\n\r\n    const activeUser    = useContext(ActiveUserContext);\r\n    const pathPre       = useContext(pathPreContext);\r\n\r\n    const [filterText, setFilterText] = useState(\"\");\r\n\r\n    const [showNewUserModal, setShowNewUserModal] = useState(false);\r\n    const [user, setUserModal] = useState(\"\");\r\n  \r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n    if (activeUser.isAdmin === false){\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n\r\n \r\n\r\n    //filter users by name/email / appartment\r\n    let sortedUsers=\"\";\r\n    if (Array.isArray(users)){\r\n        sortedUsers = users.filter(user => \r\n            user.buildingId === activeUser.buildingId && user.isActive === 1 && (\r\n            user.name.toLowerCase().includes(filterText.toLowerCase()) || \r\n            user.email.toLowerCase().includes(filterText.toLowerCase()) ||\r\n            parseInt(user.appNumber) === parseInt(filterText)\r\n            )\r\n        );\r\n    }\r\n\r\n\r\n   \r\n    function setUpdate(user){\r\n         setShowNewUserModal(true); //open new modal \r\n         setUserModal(user);  //null for new user, or obj user from user's list \r\n    }        \r\n\r\n\r\n    /*  send the message id to app.js to delete it as the array is \r\n        held with state handeling in app.js\r\n        onDeleteUser - is sent as a prop from app.js and this func pointer receives \r\n        back the index sent to it\r\n    */\r\n    function onDeleteClick (userId){\r\n         onDeleteUser(userId); \r\n    }\r\n   \r\n\r\n\r\n    return (\r\n        <Container>\r\n            <h1>Tenants List</h1>\r\n\r\n            <Row>\r\n                <Col md={8}>\r\n                   <form className=\"d-flex\">\r\n                        <input type=\"text\" className=\"msgPageInput\"\r\n                                placeholder=\"Filter users by: name/email/appartment number\" \r\n                                value={filterText}\r\n                                onChange={e => setFilterText(e.target.value)}/>\r\n                  \r\n                    </form> \r\n                </Col>\r\n                <Col md={2}>\r\n                    {/* new user btn */}\r\n                      {activeUser.isAdmin ? <Button variant=\"outline-primary\"\r\n                            onClick={() => setUpdate(\"\")}>New Tenant\r\n                            </Button> : null}\r\n                </Col>\r\n            </Row>\r\n\r\n             \r\n            {sortedUsers? sortedUsers.map((user)  => \r\n                <>\r\n                    <Row className=\"msgCards\" key={user.userId}  >\r\n                        <Col>\r\n                           \r\n                           {/* Update & delete message buttons */}\r\n                            <Row>\r\n                                {/* user details */}\r\n                                <Col xs={4} md={2} className=\"tenantsPageUserImg\">\r\n                                        <h4 className=\"tenantsPageH4\"> \r\n                                        {user.isAdmin ? \"Admin: \":null}\r\n                                        {user.name} \r\n                                           \r\n                                        </h4>\r\n                                        <Image src={pathPre+user.img} rounded className=\"imgAvatar\" />\r\n                                </Col>\r\n                                <Col  xs={8} md={4}>\r\n                                        Email: <a href={`mailto:${user.email}`}>{user.email}</a> \r\n                                        <br/>\r\n                                        Appartment Number: {user.appNumber}\r\n                                </Col>\r\n\r\n                                {/* update & delete  btn  */}\r\n                                <Col xs={12} md={4} className=\"btnLine\">\r\n                                    {activeUser.isAdmin ? \r\n                                        <Button className=\"btnUpdateMsg\" variant=\"primary\" size=\"sm\"  \r\n                                            onClick={() => setUpdate(user) }>Update User\r\n                                        </Button> : null\r\n                                        }\r\n                               \r\n                                        {activeUser.isAdmin ? \r\n                                            <Button variant=\"danger\" size=\"sm\"\r\n                                                onClick={() => onDeleteClick(user.userId)}>Delete User\r\n                                            </Button> : null\r\n                                        }\r\n                                </Col>\r\n                            </Row>\r\n\r\n                        </Col>\r\n                    </Row>\r\n                   \r\n                    </>\r\n                  \r\n                ) : null}\r\n\r\n          \r\n            {/* activate message modal      */}\r\n            <NewUserModal \r\n                show={showNewUserModal} \r\n                onClose={() => setShowNewUserModal(false)} \r\n                onCreate={onNewUser}\r\n                objUser = {user}                    \r\n                onUpdateUser = {onUpdateUser}\r\n                />\r\n        </Container>\r\n    )\r\n}\r\nexport default TenantsPage;","import { useState } from \"react\";\r\n\r\nfunction SelectOptionsForVote({selectOptions, funcSetVoteFor}){\r\n    \r\n  \r\n    const [voteFor, setVoteFor] = useState(\"\"); \r\n\r\n \r\n    // useEffect(() => {  //without button\r\n\r\n    //     funcSetVoteFor(voteFor); \r\n        \r\n    //   }, [voteFor , funcSetVoteFor]);\r\n \r\n\r\n    function sendVote(e){\r\n        e.preventDefault(); \r\n        funcSetVoteFor(voteFor); \r\n    }\r\n\r\n\r\n\r\n    return(\r\n        <form className=\"selectOptionsForm\">\r\n            <span>Options for this Vote Ticket: </span>\r\n            \r\n            <select value={voteFor} \r\n                onChange={e => setVoteFor(e.target.value)}\r\n                className=\"form-control\">\r\n                <option>Select Options: </option>\r\n                {\r\n                    Array.isArray(selectOptions)  ? \r\n                            selectOptions.map((option) => (\r\n                            <option value={option}>{option}</option>\r\n                            ))\r\n                    :null\r\n                }        \r\n            </select>\r\n\r\n            <button onClick={sendVote}>Update Vote</button>    \r\n\r\n        </form>  \r\n    )\r\n\r\n}\r\n\r\nexport default SelectOptionsForVote; ","import { useState , useContext, useEffect } from \"react\";\r\nimport { Button, Row, Col, Container} from \"react-bootstrap\"; \r\n\r\n//https://www.npmjs.com/package/react-datetime-picker\r\nimport DateTimePicker from 'react-datetime-picker';\r\n\r\n//context\r\nimport ActiveUserContext from '../shared/activeUserContext';\r\n\r\nimport SelectOptionsForVote from '../components/SelectOptionsForVote'; \r\n\r\nimport PieChartData from '../components/PieChartData'; \r\n\r\nfunction SingleVoteTicket({voteTicket, funcUpdateDate, funcUpdateVote, funcCloseTicket}){\r\n    \r\n    const activeUser = useContext(ActiveUserContext);\r\n    const [endDateValue, endDateOnChange] = useState(new Date());\r\n    \r\n    const [votedAlert, setVotedAlert] = useState(false); \r\n\r\n\r\n\r\n    //send app.js notice to close the ticket by admin's click\r\n    function closeTicket(voteTicket){\r\n        funcCloseTicket(voteTicket); \r\n    }\r\n   \r\n\r\n    //get selected vote from \"SelectOptionsForVote\" component\r\n    //prevent voting more then once per ticket\r\n    function funcGetVote(voteFor){\r\n  \r\n        let voted = false; \r\n        if (Array.isArray(voteTicket.votes))\r\n        {\r\n            const found = voteTicket.votes.find(vote => vote.userid === activeUser.userId) ; \r\n            if (found){\r\n                voted = true; \r\n                setVotedAlert(true);\r\n            }\r\n        }\r\n        if (voted === false){\r\n             //call upper level code to update the value \r\n            funcUpdateVote(voteFor, voteTicket);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    //every time the date changes, call uper level code to update the value\r\n    useEffect(() => {\r\n        if (funcUpdateDate){\r\n            funcUpdateDate(endDateValue,voteTicket ); \r\n        }\r\n \r\n      }, [endDateValue , funcUpdateDate, voteTicket]);\r\n \r\n\r\n   \r\n    return (\r\n        <Container className=\"singleVoteTicket\">\r\n         <Row >\r\n            <Col md={8} className=\"singleVoteTicketHeader\">\r\n                <h3>{voteTicket.title}</h3>\r\n            </Col>\r\n            \r\n            <Col  className=\"singleVoteTicketHeader\">\r\n                {activeUser.isAdmin && voteTicket.status === \"open\" ? \r\n                    <Button variant=\"danger\" size=\"sm\"\r\n                            onClick={() => closeTicket(voteTicket)}>\r\n                            Close Ticket\r\n                    </Button>\r\n                  :\r\n                  null\r\n              }    \r\n            </Col>\r\n              \r\n         </Row> \r\n\r\n\r\n        <Row >\r\n           <Col md={7} sm={12}>\r\n                    <strong>details:</strong> {voteTicket.details}\r\n                    <br/>\r\n                    <strong>End date:</strong> {  \r\n                        endDateValue.toLocaleString() >  new Date(voteTicket.endDate).toLocaleString() ? \r\n                        endDateValue.toLocaleString() : \r\n                        new Date(voteTicket.endDate).toLocaleString()  }\r\n\r\n                    {activeUser.isAdmin && voteTicket.status === \"open\" ? \r\n                        <>\r\n                        <br/>\r\n                        <strong>Update end date:</strong>\r\n                            <DateTimePicker\r\n                                onChange={endDateOnChange}\r\n                                value={endDateValue}\r\n                                minDate= {new Date(voteTicket.endDate)}\r\n                                \r\n                            />\r\n                        </>  \r\n                            : null} \r\n\r\n                    \r\n                      {/* present options to vote - for tenant   */}\r\n                      {votedAlert? <><br/><span className=\"text-danger\">You voted for this issue, please prevent for voting twice, your vote will not be counted</span></> : null}\r\n\r\n                      { voteTicket.status === \"open\" &&  Array.isArray(voteTicket.options)?   \r\n                            <SelectOptionsForVote \r\n                                    selectOptions={ voteTicket.options} \r\n                                    funcSetVoteFor= {funcGetVote}    \r\n                                    \r\n                             />\r\n                            :\r\n                            null\r\n                    }       \r\n                   \r\n                        \r\n            </Col>\r\n            <Col  md={5} sm={12}>\r\n                {Array.isArray(voteTicket.options) ? \r\n                <PieChartData entity={voteTicket} /> : null } \r\n            </Col>\r\n        </Row>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default SingleVoteTicket; ","import React, { useState } from 'react';\r\nimport { Button, Modal, Form, Col, Row } from 'react-bootstrap';\r\n\r\nimport SetCurrentDateTime from './utils';\r\n\r\nimport DateTimePicker from 'react-datetime-picker';\r\n \r\n\r\nfunction NewTicketModal({ show, onClose, onCreate , activeUserBuildingid, activeUserId}) {\r\n \r\n    const [title, setTitle] = useState(\"\");\r\n    const [details, setDetails] = useState(\"\");\r\n    const [endDateState, setEndDateState] = useState(new Date());\r\n \r\n\r\n    //handle dynamic options fields\r\n    const [arrOptions, setArrOptions] = useState([{ value: null }]);\r\n    \r\n    //option field changed\r\n    function handleChange(i, event) {\r\n      const values = [...arrOptions];\r\n      values[i].value = event.target.value;\r\n      setArrOptions(values);\r\n    }\r\n  \r\n    //user clicked + button \r\n    function handleAdd() {\r\n      const values = [...arrOptions];\r\n      values.push({ value: null });\r\n      setArrOptions(values);\r\n    }\r\n  \r\n    //user clicked X ( remove) button \r\n    function handleRemove(i) {\r\n      const values = [...arrOptions];\r\n      values.splice(i, 1);\r\n      setArrOptions(values);\r\n    }\r\n\r\n  \r\n    function onBeforeClose()\r\n    {\r\n        clearForm(); \r\n        onClose(); \r\n\r\n    }\r\n\r\n    let modalTitle = \"Create New Voting \"\r\n\r\n  \r\n    let  dateCreated = SetCurrentDateTime();\r\n \r\n \r\n    //clear form data   \r\n    function clearForm() {\r\n        setTitle(\"\");\r\n        setDetails(\"\");\r\n    }\r\n\r\n    //    \"votes\":[{\"userid\":1001, \"result\":\"yes\"  },{\"userid\":1002, \"result\":\"no\"  }, {\"userid\":1002, \"result\":\"no\"  } , {\"userid\":1002, \"result\":\"no\"  }  ], \r\n   \r\n\r\n\r\n\r\n    function createVote() {\r\n        let buildingId = activeUserBuildingid; // get building id\r\n        let userId = activeUserId;             // get current user id ( isAdmin)\r\n        let tempOptions = arrOptions; \r\n\r\n        console.log(arrOptions); \r\n        let tempArr=[];\r\n        tempOptions.forEach(element => {\r\n            tempArr.push(element.value); \r\n        });\r\n\r\n        let options = tempArr; \r\n\r\n\r\n        //2021-5-16 14:58:46\r\n\r\n        let datePart =\"\"; \r\n        let timePart = \"\"; \r\n\r\n        datePart = endDateState.getFullYear() + '-' + (endDateState.getMonth() + 1) + '-' + endDateState.getDate();\r\n        timePart = endDateState.getHours() + ':' + endDateState.getMinutes() + ':' + endDateState.getSeconds();\r\n\r\n        let endDate = datePart + \" \" + timePart; \r\n        \r\n      //VoteTicketId, userId, buildingId, dateCreated, title, details, options, endDate, votes, \"open\", 0\r\n        onCreate(userId, buildingId, dateCreated, title, details , options , endDate );\r\n        onBeforeClose();\r\n    }\r\n \r\n\r\n    return (\r\n        <Modal show={show} onHide={onBeforeClose} size=\"lg\">\r\n            <Modal.Header closeButton>\r\n                <Modal.Title> {modalTitle} </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <Form>\r\n                    <Form.Group as={Row} controlId=\"VoteTitle\">\r\n                        <Form.Label column sm={3}>\r\n                            Title\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"text\" placeholder=\"Vote title\" \r\n                                value={title} onChange={e => setTitle(e.target.value)}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Row} controlId=\"VoteDetails\">\r\n                        <Form.Label column sm={3}>\r\n                            Details\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                            <Form.Control type=\"text\" placeholder=\"Vote details\" \r\n                                value={details} onChange={e => setDetails(e.target.value)}/>\r\n                        </Col>\r\n                    </Form.Group>\r\n\r\n\r\n                    <Form.Group as={Row} controlId=\"VoteOptions\"> \r\n                        <Form.Label column sm={3}>\r\n                            Options\r\n                        </Form.Label>\r\n                        \r\n                        <Col sm={4}>\r\n                            {arrOptions.map((field, idx) => {\r\n                                return (\r\n                                <div key={`${field}-${idx}`}>\r\n                                    <input  className=\"dynamicOptionsInput\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter option\"\r\n                                    onChange={e => handleChange(idx, e)}\r\n                                    />\r\n                                     <Button variant=\"outline-danger\" \r\n                                        type=\"button\" onClick={() => handleRemove(idx)}>x</Button>\r\n                                </div>\r\n                                );\r\n                            })}\r\n\r\n                            <Button variant=\"outline-success\" \r\n                            type=\"button\" onClick={() => handleAdd()}\r\n                            >+</Button>\r\n                         \r\n                        </Col>\r\n                    </Form.Group>      \r\n\r\n                    <Form.Group as={Row} controlId=\"VoteOptions\">\r\n                        <Form.Label column sm={3}>\r\n                            End Date\r\n                        </Form.Label>\r\n                        <Col sm={9}>\r\n                             <DateTimePicker\r\n                                onChange={setEndDateState}\r\n                                value={endDateState}\r\n                                minDate= {new Date()}\r\n                                \r\n                            />\r\n                        </Col>\r\n                    </Form.Group>\r\n               </Form>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={onBeforeClose}>\r\n                    Cancel\r\n                </Button>\r\n                <Button variant=\"primary\" onClick={createVote}>\r\n                   Submit\r\n                </Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n}\r\n\r\nexport default NewTicketModal;","import { Redirect } from 'react-router';\r\nimport { useState, useContext  } from \"react\";\r\n\r\n//context\r\nimport ActiveUserContext from '../../shared/activeUserContext';\r\nimport { Button, Col, Container, Row } from 'react-bootstrap';\r\n\r\nimport SingleVoteTicket from '../../components/SingleVoteTicket'; \r\n\r\nimport NewTicketModal from '../../components/NewVoteTicketModal';\r\n\r\n\r\n\r\nfunction Votings({voteTickets , onNewTicket, onUpdateDate, onUpdateVote , funcCloseTicket}){\r\n\r\n    const activeUser = useContext(ActiveUserContext);\r\n    const [filterText, setFilterText] = useState(\"\");\r\n\r\n    //modal\r\n    const [newTicketModal, setNewTicketModal] = useState(false);\r\n  \r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n\r\n    let closedSortedTickets = voteTickets.filter(vote => \r\n        (vote.buildingId === activeUser.buildingId && vote.status === \"close\") &&\r\n            (\r\n                vote.title.toLowerCase().includes(filterText.toLowerCase()) || \r\n                vote.details.toLowerCase().includes(filterText.toLowerCase())\r\n            )\r\n        );\r\n\r\n\r\n    let openTickets = voteTickets.filter(vote => \r\n            (vote.buildingId === activeUser.buildingId && vote.status === \"open\") );\r\n\r\n\r\n\r\n            \r\n    function openNewVote(){\r\n        //open modal window\r\n        setNewTicketModal(true);\r\n    }\r\n\r\n\r\n    //UPDATE end date \r\n    function updateDate(updateDate , voteTicket){\r\n      //  console.log(updateDate); \r\n\r\n        \r\n        let datePart =\"\"; \r\n        let timePart = \"\"; \r\n\r\n        datePart = updateDate.getFullYear() + '-' + (updateDate.getMonth() + 1) + '-' + updateDate.getDate();\r\n        timePart = updateDate.getHours() + ':' + updateDate.getMinutes() + ':' + updateDate.getSeconds();\r\n\r\n        let endDate = datePart + \" \" + timePart; \r\n   \r\n      //  console.log(endDate);\r\n\r\n        voteTicket.endDate = endDate; \r\n\r\n        //call app.js to update\r\n        onUpdateDate(voteTicket); \r\n\r\n    }\r\n\r\n\r\n    //get vote option for ticket and pass it to app.js \r\n    function updateVote(voteFor, voteTicket){\r\n        onUpdateVote(voteFor, voteTicket); \r\n    }\r\n\r\n\r\n    function closeTicket(voteTicket){\r\n        funcCloseTicket(voteTicket); \r\n    }\r\n\r\n    return(\r\n        <Container>\r\n           \r\n               <Row>\r\n                   <Col sm={6} md={6}>\r\n                \r\n                    <h1>Active Votings</h1>  \r\n\r\n                     {/* Add new vote ticket btn */}\r\n                     {activeUser.isAdmin ? \r\n                            <Button variant=\"outline-primary\" style={{\"margin-bottom\": \"2vh\"}}\r\n                                    onClick={() => openNewVote()}>New Voting\r\n                            </Button> : null}\r\n\r\n                      {/* Loop over OPEN voteTickets array and each time present -  Single */}\r\n\r\n                      {openTickets? openTickets.map((openVoteTicket)  => \r\n                            <SingleVoteTicket \r\n                                voteTicket={openVoteTicket} \r\n                                funcUpdateDate={updateDate} \r\n                                funcUpdateVote={updateVote}\r\n                                funcCloseTicket={closeTicket}\r\n                                >\r\n\r\n                            </SingleVoteTicket>\r\n                         \r\n                         ) : \"There are no open votes\" }\r\n                   </Col>\r\n\r\n              \r\n              \r\n                   <Col>\r\n                        <h1>Votings Results</h1>\r\n\r\n                        {/* filer box */}\r\n                        <form className=\"d-flex\">\r\n                            <input type=\"text\" className=\"msgPageInput\"\r\n                                placeholder=\"Filter by text in title and details\" \r\n                                value={filterText}\r\n                                onChange={e => setFilterText(e.target.value)}/>\r\n                        </form>\r\n\r\n                        {/* Loop over CLOSED  voteTickets array and each time present -  Single */}\r\n\r\n                        {closedSortedTickets? closedSortedTickets.map((closedVoteTicket)  => \r\n                            <SingleVoteTicket voteTicket={closedVoteTicket} ></SingleVoteTicket>\r\n                         \r\n                         ) : \"There are no closed votes\" }\r\n                         \r\n                   </Col> \r\n\r\n               </Row>\r\n\r\n           \r\n\r\n\r\n            {/* activate new vote ticket  modal  */}   \r\n            <NewTicketModal \r\n                show={newTicketModal} \r\n                onClose={() => setNewTicketModal(false)} \r\n                onCreate={onNewTicket}\r\n                activeUserBuildingid={activeUser.buildingId}\r\n                activeUserId = {activeUser.userId}\r\n            />\r\n\r\n\r\n        </Container>\r\n         \r\n       \r\n    )\r\n}\r\n\r\nexport default Votings;","import React , {useContext } from 'react';\r\nimport {Navbar, Nav} from 'react-bootstrap'; \r\nimport logo from '../assets/images/logo.png';\r\n\r\n//context\r\nimport ActiveUserContext from '../shared/activeUserContext';\r\n \r\nimport { useLocation } from 'react-router-dom';\r\n \r\n\r\nfunction SiteNavBar( {onLogout} ){\r\n\r\n    const activeUser = useContext(ActiveUserContext);\r\n\r\n    let  checkIfAdmin = false; \r\n\r\n    if (activeUser)\r\n    {\r\n        checkIfAdmin = activeUser.isAdmin; \r\n    }\r\n   \r\n    const location = useLocation() //get current relative path, like /tenants\r\n    \r\n \r\n   \r\n    function setActive(navLink){\r\n        let classActive = \"\"; \r\n\r\n        if (location.pathname === navLink){\r\n            classActive=\" active \"; \r\n        }\r\n        else\r\n        {\r\n            classActive=\"\";\r\n        }\r\n        return classActive; \r\n    }\r\n\r\n \r\n\r\n\r\n    return(\r\n      \r\n        <Navbar sticky=\"top\" collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\">\r\n        <Navbar.Brand href=\"#/\"><img src={logo} alt=\"logo\"/></Navbar.Brand>\r\n        <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n        <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n        <Nav  activeKey={location.pathname}\r\n            className=\"mr-auto\">\r\n            {/* show navigaion menu only for registered users admin/tenant */}\r\n            {activeUser ? <Nav.Link  className={ setActive( \"/dashboard\") }  href=\"#/dashboard\">DashBoard</Nav.Link> : null}\r\n            {/* Tenants pages is only for admins */}\r\n            {checkIfAdmin === true? <Nav.Link   className={  setActive( \"/tenants\") } href=\"#/tenants\">Tenants</Nav.Link> : null}\r\n            {activeUser? <Nav.Link  className={ setActive (\"/messages\" ) } href=\"#/messages\">Messages</Nav.Link> : null}\r\n            {activeUser? <Nav.Link  className={  setActive ( \"/votings\" ) } href=\"#/votings\">Voting</Nav.Link>: null}\r\n            {activeUser? <Nav.Link  className={  setActive ( \"/tickets\" ) } href=\"#/tickets\">Tickets</Nav.Link>: null}\r\n            <Nav.Link  className={  setActive ( \"/contact\" ) } href=\"#/contact\">Contact</Nav.Link>\r\n        </Nav>\r\n        <Nav>\r\n            {!activeUser ? <Nav.Link href=\"#/login\">Login</Nav.Link> : null}\r\n            {!activeUser ? <Nav.Link href=\"#/signup\" className=\"signupBtn\">Signup</Nav.Link> : null}\r\n            {activeUser ? <Nav.Link href=\"#\" onClick={() => onLogout()}>Logout</Nav.Link> : null}\r\n            {activeUser?  <Nav.Link href=\"#\">{activeUser.name},  {activeUser.isAdmin === true ? \"Admin\" : \"Tenant\"}</Nav.Link> :null}\r\n            \r\n        </Nav>\r\n        </Navbar.Collapse>\r\n        </Navbar>\r\n    )\r\n}\r\n\r\nexport default SiteNavBar; ","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAADaElEQVR4nO2bW0gUURjH/2fcjTTt1d21J7NezB6MxFiU1PLFhyKswBtBQg9FbxHRhaGEoqCHkHooItNdyEwKtKALgrZ4ZTUvQWVvuhcf0zRQ5/SwpenMujuns2dWZn6wMHu+Of/55g/nmzkfuwSckGVZyssvrCaS4uKlqQVVpMCYv88jy7LCQ8/GQwQA9u4rqAFoEyjhJakJIRR5+YUA0MxDT+IhAgAUJJuXVkwI3clLipsBmxXLAKMTMBrTG6CrZF+4cqN8bnbuPAhVGbctLW1X6tbUHH6pRWfh18Lkz/n5b6oAJUp6Rvq9Ow1X38arpesxODn5vWN2ds6uZ06CyPnzUbE9I70cwJZ4hXQtgSS5+Q35oTNH5hehk5VHWacmhGdtL5nmMRtQf6qadWpCYDXA9E8B0xugWgLtnZ27oUhHtB519x88FpPVf9Le8fqiapASBZLy6lhFxdd/h9U1QJHeAMhO9K4uoVByS3Nckc5g3eNTawmI29WJR7WLNH0NML0B3DpClFJ86OoBAJSVFIEQIjTOCjcD3nd14/bdxpXvh0qLhcZZ4bYEgqHwynEgFBIeZ8X0NYCbAXbb6mqy29UbskTHWeFmQJH7AFzOTLicmSh2FwqPs8KtCO7IcqLpYaNhcVasGmB0AkZjGcBLaGo6iNrTZ1FXfw7TgaDwOCvcDOjx9SIUnkEwFEa3r094nBVuBiwuLa0eLy4Kj7Ni1QBeQi6HY+U4y+kQHmeF24tQZIsaOS49WCQ8zgo3AwghKCuJvkVNdJwVqwYYnYDRWC0xLiqwWmJWS2yzYrXEeAlZLTGrJbY5sQwwOgGj4VYDpqaDuHStAYQQ3Lx+GVkup2Y8FJ7ZUMfpyNxwfjR9VoS3xGJhipZYTC2BLTFuS0APtVXHUVd1Ys3YU28rmr3PhecirCWWrPrCWmLJqi+sJZas+qZ/D7AMMDoBo7EMMDoBo7HJsiz5BiaqQagLAPzDn5YJSEqsiXr/oDDx+Yuuc1n/AAEAw8OjmuMUdPlwRWXkl+SUBNwFuR7bx6HxGhA0/T2pr38oros8euJhTjAW/pFR+Ee0byIeevsHo4VSAER+SU4ofAMTkIhCKPOVGGnxttaSdbR42upE5wGiUJu7INfjGxyjFGSPkGuCjrv353nfdb5YM25UHr8BM0n3fXKSONMAAAAASUVORK5CYII=\"","import { Container } from \"react-bootstrap\";\r\n\r\nfunction Footer(){\r\n    return(\r\n        <footer>\r\n            <Container>\r\n                <a href=\"#/contact\">Contact</a>\r\n            </Container>\r\n             \r\n        </footer>\r\n    )\r\n}\r\nexport default Footer;","import { useState } from 'react';\r\nimport { Row } from 'react-bootstrap';\r\n\r\nfunction ContactComponent(){\r\n    \r\n  const [toSend, setToSend] = useState({\r\n    name: '',\r\n    email:'',\r\n    message: '',    \r\n  });\r\n\r\n  const [showDetails,setShowDetails] = useState(false); \r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    setShowDetails(true); \r\n  };\r\n    \r\n  const handleChange = (e) => {\r\n    setToSend({ ...toSend, [e.target.name]: e.target.value });\r\n  };\r\n\r\n\r\n    return(\r\n        <div className=\"contactForm\">\r\n\r\n           { showDetails === false?  \r\n           \r\n            <form onSubmit={onSubmit}>\r\n              <Row className=\"rowSpace\">\r\n                    <label htmlFor=\"name\" />\r\n                    <input  type='text' required className=\"form-control\" name='name'  placeholder='Your name'   value={toSend.name}  onChange={handleChange}  />\r\n                </Row>\r\n\r\n                <Row className=\"rowSpace\">\r\n                    <label htmlFor=\"email\" />  \r\n                    <input type=\"email\" required className=\"form-control\" name=\"email\" placeholder=\"E-Mail\" value={toSend.email} onChange={handleChange} />\r\n                </Row>\r\n\r\n                <Row className=\"rowSpace\">\r\n                    <label htmlFor=\"message\" />\r\n                    <input type='text'  required className=\"form-control\" name='message'  placeholder='Your message' value={toSend.message}  onChange={handleChange} />\r\n                </Row>\r\n\r\n                <Row>   \r\n                   <button type=\"submit\"  className=\"btn submitForm\">Send</button>\r\n                </Row>\r\n\r\n              </form>\r\n\r\n              : \r\n\r\n              <div>\r\n                  Your details: \r\n                  <br/>\r\n                  {toSend.name}\r\n                  <br/>\r\n                  {toSend.email}\r\n                  <br/>\r\n                  {toSend.message}\r\n                  <br/>\r\n                  This is just a demo app so there is no use here in emailjs solution (3rd party)  . \r\n \r\n              </div>\r\n              }\r\n\r\n            </div>\r\n\r\n\r\n    )\r\n}\r\n\r\nexport default ContactComponent;","import { Container } from \"react-bootstrap\";\r\nimport ContactComponent from \"../../components/Contact\";\r\n\r\nfunction ContactPage(){\r\n    return (\r\n        <Container>\r\n            <h1>Contact</h1>\r\n            <ContactComponent></ContactComponent>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default ContactPage; ","import { Container, Button, Row, Col} from 'react-bootstrap';\r\nimport Accordion from 'react-bootstrap/Accordion';\r\nimport Card from 'react-bootstrap/Card';\r\nimport { useState, useContext  } from \"react\";\r\nimport NewMsgModal from '../../components/NewMsgModal';\r\nimport SingleMessage from '../../components/SingleMessage';\r\nimport { Redirect } from 'react-router';\r\n \r\n//context\r\nimport ActiveUserContext from '../../shared/activeUserContext';\r\n//import pathPreContext from '../../shared/pathPreContext'; \r\n\r\nfunction Tickets({issues, users, onNewTicket, onUpdateCommentIssue, updateIssueStatus}){\r\n    const activeUser = useContext(ActiveUserContext);\r\n    const [openModal, setOpenModal] = useState(false);\r\n    const [issue, setIssueModal] = useState(\"\");\r\n    const [status, setStatus] = useState(\"Open\");\r\n    \r\n  //  const pathPre = useContext(pathPreContext);\r\n\r\n\r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n\r\n    function setUpdate(issue){\r\n        setOpenModal(true);\r\n        setIssueModal(issue); \r\n    }     \r\n    \r\n    \r\n    //pass caller (app.js ) by local func , update comment\r\n    function funcUpdateMessage(comment, issue){\r\n      onUpdateCommentIssue(comment, issue); \r\n    }\r\n\r\n\r\n    //All open tickets\r\n    let issuesArr = issues.filter(issueItem => issueItem.buildingId === activeUser.buildingId && issueItem.status === status); \r\n    //sort issues by date       \r\n    issuesArr.sort((a,b)=> b.dateCreated - a.dateCreated);         \r\n\r\n \r\n    function closeTicket(ticketId)\r\n    {\r\n      var retVal = window.confirm(\"Issue will be marked as deleted, are you sure ?\");\r\n      if( retVal === true ) { //delete ticket\r\n        updateIssueStatus (ticketId , \"Close\"); //call app.js to activate the actual delete from array\r\n      }\r\n    }\r\n    \r\n    function openTicket(ticketId){\r\n      var retVal = window.confirm(\"This will reopen the issue, are you sure ?\");\r\n      if( retVal === true ) { //open ticket\r\n        updateIssueStatus (ticketId , \"Open\"); //call app.js to activate the actual open from array\r\n      }\r\n    }\r\n\r\n\r\n    return (\r\n        <Container>\r\n            <h1>Tickets</h1>\r\n\r\n            {/* open new ticket  */}\r\n            {activeUser ? <> \r\n                <Row style={{ paddingBottom:10 }}> \r\n                    <Col xs={12} md={2}>\r\n                        <Button className=\"ticketsNavBtns\" variant=\"outline-primary\"  onClick={() => setUpdate(\"\")}>\r\n                           New Ticket   \r\n                        </Button> \r\n                    </Col>\r\n                    <Col  xs={12} md={2}>\r\n                        <Button className=\"ticketsNavBtns\" variant=\"outline-primary\" onClick={() => setStatus(\"Close\")}>\r\n                          Closed Tickets\r\n                        </Button>\r\n                    </Col>\r\n                    <Col  xs={12} md={2}>\r\n                        <Button className=\"ticketsNavBtns\" variant=\"outline-primary\" onClick={() => setStatus(\"Open\")}>\r\n                          Open Tickets\r\n                        </Button>\r\n                    </Col>\r\n                </Row>\r\n\r\n\r\n              {/* modal window, as it should receive building id there is no point of it without active user it will thow an err */}\r\n               <NewMsgModal \r\n                    show={openModal} \r\n                    onClose={() => setOpenModal(false)} \r\n                    onCreate={onNewTicket}\r\n                    activeUserBuildingid={activeUser.buildingId}\r\n                    activeUserId = {activeUser.userId}\r\n                    objMsg = {issue}   \r\n                    type={1} // type=1 : ticket, default: message\r\n                \r\n                />\r\n                </>\r\n                : null}\r\n\r\n                {/* show all open tickets */}\r\n                \r\n                {\r\n                  Array.isArray(issuesArr)  ?  issuesArr.map((issue, i) =>\r\n          \r\n                    <Accordion>\r\n                      <Card key={i}>\r\n                        <Card.Header>\r\n                          <Accordion.Toggle as={Card.Title} variant=\"link\" eventKey=\"0\">\r\n                                  <Row>\r\n                                      <Col md={8} sm={6}>\r\n                                             #{issue.ticketId} --   <span className=\"CardissueTitle\"> {issue.title}</span>  \r\n                                      </Col>\r\n                                      <Col md={2} sm={6}>\r\n                                           {activeUser.isAdmin === true && status === \"Open\"? \r\n                                                 <Button variant=\"danger\" size=\"sm\" onClick={() => closeTicket(issue.ticketId)} >Close Ticket</Button> \r\n                                            :null  }\r\n                                            {activeUser.isAdmin === true && status === \"Close\"? \r\n                                                 <Button variant=\"danger\" size=\"sm\" onClick={() => openTicket(issue.ticketId)} >Reopen Ticket</Button>   \r\n                                            :null}\r\n                                      </Col>\r\n                                      { issue.userId === activeUser.userId && status === \"Open\"?  \r\n                                                <Col md={2}><Button size=\"sm\"  onClick={() => setUpdate(issue)}>Update Ticket</Button></Col> \r\n                                            :null}\r\n                                  </Row>\r\n                          </Accordion.Toggle>\r\n                        </Card.Header>\r\n                        <Accordion.Collapse eventKey=\"0\">\r\n                          <Card.Body>\r\n                            {/* show single message with its comments */}           \r\n                            <SingleMessage \r\n                                users={users}\r\n                                message={issue} \r\n                                updateMessage={funcUpdateMessage}\r\n                                type={1}\r\n                                />\r\n                          </Card.Body>\r\n                        </Accordion.Collapse>\r\n                      </Card>\r\n                     \r\n                    </Accordion>\r\n\r\n                  )\r\n                  : null\r\n                }\r\n  \r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default Tickets; \r\n","export default class UserModel {\r\n    constructor(SingleUser) {\r\n        this.userId     = SingleUser.userId; //PK\r\n        this.isAdmin    = SingleUser.isAdmin //true/false\r\n        this.name       = SingleUser.name;\r\n        this.email      = SingleUser.email;\r\n        this.img        = SingleUser.img;\r\n        this.pswrd      = SingleUser.pswrd;\r\n        this.city       = SingleUser.city;\r\n        this.street     = SingleUser.street;\r\n        this.stNumber   = SingleUser.stNumber;\r\n        this.buildingName = SingleUser.buildingName;\r\n        this.buildingId   = SingleUser.buildingId;  //FK   \r\n        this.appNumber      = SingleUser.appNumber; //number\r\n\r\n        if ( !this.isActive ){\r\n            this.isActive = 1;  //1 = active user, 0 = deleted user\r\n        }\r\n        else\r\n        {\r\n            this.isActive =  SingleUser.isActive; \r\n        }\r\n    }\r\n\r\n    \r\n    login(email, pwd) {\r\n        return email.toLowerCase() === this.email.toLowerCase() && pwd === this.pswrd;\r\n    }\r\n}","export default class BuildingModel {\r\n    constructor(SingleBuilding) {\r\n        this.buildingId = SingleBuilding.buildingId //PK. FK in all other entities\r\n        this.userId  = SingleBuilding.userId ; //FK, (UserModel), is the admin of this building, can be only one\r\n        this.userEmail = SingleBuilding.userEmail; //identify the user\r\n        this.buildingName = SingleBuilding.buildingName;\r\n        this.city = SingleBuilding.city;\r\n        this.street = SingleBuilding.street;\r\n        this.stNumber = SingleBuilding.stNumber;\r\n    }\r\n}","export default class MessageModel {\r\n    constructor(singleMessage) {\r\n        this.messageId  = singleMessage.messageId;  //PK \r\n        this.buildingId = singleMessage.buildingId; //FK (BuildingModel)\r\n        this.userId     = singleMessage.userId;     //FK (UserModel)\r\n      \r\n        this.dateCreated   =  singleMessage.dateCreated;\r\n      \r\n        this.title      = singleMessage.title; \r\n        this.details    = singleMessage.details;\r\n\r\n        if (singleMessage.priority === null){\r\n            this.priority  = \"Info\";\r\n        }\r\n        else{\r\n            this.priority   = singleMessage.priority;   // Important / Info ( default) \r\n        }\r\n       \r\n        if  (singleMessage.img ){ //we have img \r\n            this.img        = singleMessage.img; \r\n        }\r\n        else{\r\n            this.img  = \"images/msgDefault.jpg\";\r\n        }\r\n        this.ArrayCommentsId = singleMessage.ArrayCommentsId; //array \r\n    }\r\n}","import SetCurrentDateTime from '../components/utils';\r\n\r\nexport default class VoteTicketModel {\r\n    constructor(singleVoteTicket) {\r\n         this.VoteTicketId  = singleVoteTicket.VoteTicketId; //PK \r\n         this.userId        = singleVoteTicket.userId;      //FK ( UserModel)\r\n         this.buildingId    = singleVoteTicket.buildingId; //FK (BuildingModel) \r\n         \r\n         if (singleVoteTicket.dateCreated === null){\r\n            this.dateCreated = SetCurrentDateTime(); //return string - current date/time\r\n        }\r\n         else{\r\n            this.dateCreated   =  singleVoteTicket.dateCreated;\r\n        }\r\n\r\n         this.title         = singleVoteTicket.title; \r\n         this.details       = singleVoteTicket.details; \r\n         \r\n        this.options       = singleVoteTicket.options; //array of strings \r\n\r\n         this.endDate       = singleVoteTicket.endDate; //the vote is no longer active after this date\r\n  \r\n        if (!singleVoteTicket.votes){\r\n            this.votes  = []; \r\n        }\r\n        else{\r\n            this.votes         = singleVoteTicket.votes;  //votes are related to options, see json for the example\r\n        }\r\n      \r\n        if ( !singleVoteTicket.status )\r\n        {\r\n            this.status= \"open\"; \r\n        }\r\n        else\r\n        {         \r\n            this.status        = singleVoteTicket.status; //open/close \r\n        }\r\n\r\n        if ( !singleVoteTicket.voteSummary )\r\n        {\r\n            this.voteSummary = 0 ; \r\n        }\r\n        else{\r\n            this.voteSummary   = singleVoteTicket.voteSummary; \r\n        }\r\n        \r\n    }\r\n}","import SetCurrentDateTime from '../components/utils';\r\n\r\nexport default class TicketModel {\r\n    constructor(singleTicket) {\r\n        this.ticketId  = singleTicket.ticketId;  //PK \r\n        this.buildingId = singleTicket.buildingId; //FK (BuildingModel)\r\n        this.userId     = singleTicket.userId;     //FK (UserModel)\r\n      \r\n        if (singleTicket.dateCreated === null){\r\n            this.dateCreated = SetCurrentDateTime(); //return string - current date/time\r\n        }\r\n        else{\r\n            this.dateCreated   =  singleTicket.dateCreated;\r\n        }\r\n        \r\n        this.dateCreated   =  singleTicket.dateCreated;\r\n      \r\n        this.title      = singleTicket.title; \r\n        this.details    = singleTicket.details;\r\n\r\n        if (singleTicket.priority === null) { this.priority  = \"Info\"; }\r\n        else {  this.priority   = singleTicket.priority;   }  // Important / Info ( default) \r\n       \r\n       \r\n        if (!singleTicket.status){ this.status = \"Open\"; }\r\n        else { this.status = singleTicket.status;  } // \"Open\" / \"Close\" \r\n               \r\n\r\n        if  (singleTicket.img ){ //we have img \r\n            this.img        = singleTicket.img; \r\n        }\r\n        else{  this.img  = \"images/issue-image.jpg\";}\r\n   \r\n        this.ArrayCommentsId = singleTicket.ArrayCommentsId; //array \r\n    }\r\n}","import { HashRouter, Route, Switch } from 'react-router-dom';\nimport { useState } from 'react';\n// components & pages\nimport Dashboard from './pages/Dashboard/Dashboard';\nimport HomePage from './pages/HomePage/HomePage';\nimport LoginPage from './pages/LoginPage/LoginPage';\nimport SignUp from './pages/SignUpPage/SignUp';\nimport Messages from './pages/MessagesPage/Messages';\nimport TenantsPage from './pages/TenantsPage/Tenants';\nimport Votings from './pages/VotingsPage/Votings';\nimport SiteNavBar from './components/SiteNavBar';\nimport Footer from './components/Footer';\nimport ContactPage from './pages/Contact/ContactPage';\nimport Tickets from './pages/Tickets/Tickets';\n\n//css\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\n//data\nimport usersJSON from './data/users.json';\nimport buildinsJSON from './data/buildings.json';\nimport messagesJSON from './data/messages.json';\nimport voteTicketsJSON from './data/votesTickets.json'\nimport ticketsJSON from './data/tickets.json'\n\n//data model\nimport UserModel from './Model/UserModel'; \nimport buildingModel from './Model/BuildingModel'; \nimport MessageModel from './Model/MessageModel';\nimport VoteTicketModel from './Model/VoteTicketModel'\nimport TicketModel from './Model/TicketsModel'\n\n//context\nimport ActiveUserContext from './shared/activeUserContext';\n\n\n  \n\n\nfunction App() {\n\n  //******** Define local memory arrays to use with JSON local files********\n  // USERS\n  const[users, setUsers] = useState(usersJSON.map(user => new UserModel(user)));\n  // BUILDINGS\n  const[buildings, setBuildings] = useState(buildinsJSON.map (building => new buildingModel(building)) ); \n  //MESSAGES\n  const[messages, setMessages] = useState(messagesJSON.map (message => new  MessageModel(message)) ) ;\n  //VOTE TICKETS JSON\n  const[voteTickets, setVoteTickets]  = useState(voteTicketsJSON.map (voteTicket => new  VoteTicketModel(voteTicket)) ) ;\n  //TICKETS\n  const[ticketsArr, setTicketsArr] = useState(ticketsJSON.map (ticket => new TicketModel(ticket))); \n  //State \n  const [activeUser, setActiveUser] = useState(null);\n\n\n  //Try to find if there is an admin in the building: \n  function checkUser(email, buildingName) {\n    for (var i in users) {\n        if ((users[i].email === email) && (users[i].buildingName === buildingName) && (users[i].isAdmin)){\n           //alert - is admin in this building name  and break \n           console.log(\"building name = \" + users[i].buildingName + \" email = \" + users[i].email + \" is admin = \" + users[i].isAdmin );\n      \n           return true; \n                     \n        }\n        else //ok, create new\n        {\n            //console.log(\"user ok\");\n            return false; \n        }\n    }\n}\n\n\n//ADD NEW -  building\nfunction addBuilding(userId, userEmail, buildingName, city, street, stNumber){\n  //create new building id\n  let buildingId = buildings[buildings.length - 1].buildingId + 1; \n  \n  const newBuilding = new buildingModel({\n    buildingId,\n    userId,\n    userEmail,\n    buildingName,\n    city,\n    street,\n    stNumber\n  });\n\n  setBuildings(buildings.concat(newBuilding));\n\n  return   buildingId; \n}\n\n\nfunction newUser(userId, isAdmin, name, email, img , pswrd,  city, street,  stNumber, buildingName, buildingId, appNumber){\n  \n  if (userId === 0){\n    userId =  users[users.length - 1].userId + 1; \n  }\n\n  const newUser = new UserModel({\n    userId,\n    isAdmin,\n    name,\n    email,\n    img,\n    pswrd, \n    city, \n    street,\n    stNumber,\n    buildingName,\n    buildingId,\n    appNumber\n  });\n  \n  //check if is in users array with this building name as admin\n  let ifExist = false; \n\n  ifExist = checkUser(email, buildingName); \n\n  if (ifExist === false){\n    //update users array\n    setUsers(users.concat(newUser));\n  \n  }\n\n  \n}\n\n\n  //ADD NEW : admin user\n  function addUser(isAdmin, name, email, img, pswrd, city, street, stNumber, buildingName,  appNumber) {\n   \n    let buildingId =\"\"; \n    let userId = \"\"; \n\n    userId =  users[users.length - 1].userId + 1; \n     \n    buildingId = addBuilding(userId, email, buildingName, city, street, stNumber); \n    \n    newUser(userId, isAdmin, name, email, img , pswrd,  city, street,  stNumber, buildingName, buildingId, appNumber);\n   \n    return userId; \n\n  }\n\n \n  /*********************USERS (tenants) ********************************* */\n  function createNewUser( userId, isAdmin, name, email, img , pswrd,  city, street,  stNumber, buildingName, buildingId, appNumber){\n      //console.log(\"app js - createNewUser\"); \n\n      newUser(userId, isAdmin, name, email, img , pswrd,  city, street,  stNumber, buildingName, buildingId, appNumber);\n  }\n\n\n  function updateUser(userId, name, email, img , pswrd, appNumber){\n       \n    let userPos = users.findIndex(user => user.userId === userId); //index in array \n\n    const usersClone = [...users];\n  \n    usersClone[userPos].name=name; \n    usersClone[userPos].email=email;\n    usersClone[userPos].img=img; \n    usersClone[userPos].pswrd=pswrd;\n    usersClone[userPos].appNumber=appNumber;\n\n    setUsers(usersClone);\n  }\n\n\n  //mark user as not active\n  function deleteUser(userId){\n    \n    //console.log(userId); \n    //find the user in users array \n    \n    let userPos = users.findIndex(user => user.userId === userId); //index in array \n\n    const usersClone = [...users];\n  \n    usersClone[userPos].isActive = 0; \n\n    setUsers(usersClone);\n  }\n\n\n\n\n\n  /**************MESSAGES SECTION : INSERT, UPDATE, DELETE ***************** */\n\n  //INSERT\n  function insertNewMessage(buildingId,userId,  dateCreated, title, details, priority, img){\n      console.log(\"addNewMsg\");\n      \n      let messageId = 10001;\n      \n      if(messages){\n        messageId =  messages[messages.length-1].messageId + 1;\n      }\n\n      const addNewMsg = new MessageModel({\n        messageId,\n        buildingId,\n        userId, \n        dateCreated, \n        title,\n        details, \n        priority,\n        img\n        \n      });\n    \n      setMessages(messages.concat(addNewMsg));\n  \n  }\n\n\n  //UPDATE\n  function updateMessage(messageId, title, details, priority, img){\n    //1. find message id in the array of messages\n    let index = messages.findIndex(msg => msg.messageId === messageId);\n    //console.log(\"result==> \"+ index);\n\n    //2. update existing obj with new form data from user \n    if (index){\n      messages[index].title = title; \n      messages[index].details = details; \n      messages[index].priority = priority; \n      messages[index].img = img; \n\n      setMessages(messages); \n    }\n\n  }\n\n\n\n  //add or update a message\n  function addNewMsg(messageId, buildingId,userId,  dateCreated, title, details, priority, img){\n    console.log(\"messageId ===> \" + messageId); \n\n      if (!messageId){\n        insertNewMessage(buildingId,userId,  dateCreated, title, details, priority, img); \n      }\n      else{\n        console.log(\"update message ==> \"); \n        updateMessage(messageId, title, details, priority, img); \n      }\n  }\n\n  //DELETE message by message id\n  function deleteMsg(msgID){\n    let userAnswer = false; \n\n    //confirm doesnt work, window.confirm - works\n    userAnswer = window.confirm(\"Delete message No. \" + msgID + \"?\");\n   \n    if (userAnswer === true){ //clicked yes \n       //get position in array \n       let msgToDeletePos = messages.findIndex(msg => msg.messageId === msgID);\n\n       //if we have position \n      if (msgToDeletePos){\n          const msgAfterDel = messages.filter(msg => msg.messageId !== msgID);\n          setMessages(msgAfterDel); \n      }\n    }\n\n  }\n\n  //update single message with new comment \n  function updateCommentsForMessage(comment, message){\n  \n    let msgId = message.messageId; //msg id\n\n    let msgPos = messages.findIndex(msg => msg.messageId === msgId); //index in array \n   \n    const messagesClone = [...messages]; \n    \n    if (messagesClone[msgPos].ArrayCommentsId){ //push new obj to exiting array \n      messagesClone[msgPos].ArrayCommentsId.push(comment); \n    }\n    else{ //create new object , there is no array \n      messagesClone[msgPos].ArrayCommentsId = [{\n                                              \"dateCreated\":comment.dateCreated, \n                                              \"userId\": comment.userId,\n                                              \"buildingId\": comment.buildingId,\n                                              \"commentText\": comment.commentText\n                                           }] ; \n    }\n  \n    setMessages(messagesClone);\n\n  }\n\n/********************END MESSAGES SECTION*********************** */\n\n\n\n\n/********************VOTING SECTION ***************************** */\n\nfunction addNewVoteTicket(userId, buildingId, dateCreated, title, details , options , endDate ){\n  console.log(\"Insert new vote ticket\"); \n  console.log (userId +\",\"+ buildingId +\",\"+ dateCreated +\",\"+ title +\",\"+ details +\",\"+ options +\",\"+ endDate); \n\n\n  let VoteTicketId = 10001;\n      \n  if(voteTickets){\n    VoteTicketId =  voteTickets[voteTickets.length-1].VoteTicketId + 1;\n  }\n\n  const addNewVote = new VoteTicketModel({\n    VoteTicketId,\n    userId, \n    buildingId,\n    dateCreated, \n    title,\n    details, \n    options,\n    endDate\n    \n  });\n\n  setVoteTickets(voteTickets.concat(addNewVote));\n  console.log(voteTickets); \n\n}\n\n//UPDATE ticket end date\nfunction updateEndDate (voteTicket){\n  let ticketId  = voteTicket.VoteTicketId; //vote ticket id\n\n  let ticketPos = voteTickets.findIndex(vote => vote.VoteTicketId === ticketId); //index in array \n\n  voteTickets[ticketPos].endDate = voteTicket.endDate; \n\n  setVoteTickets(voteTickets);\n}\n\n\n//UPDATE ticket - new user's VOTE option\nfunction updateVoteOptionsArray (voteFor, voteTicket){\n  let ticketId  = voteTicket.VoteTicketId; //vote ticket id\n\n  let ticketPos = voteTickets.findIndex(vote => vote.VoteTicketId === ticketId); //index in array \n\n  const voteTicketsClone  = [...voteTickets];\n\n  if (Array.isArray(voteTicketsClone[ticketPos].votes)){\n    voteTicketsClone[ticketPos].votes.push({\"userid\": activeUser.userId, \"result\":voteFor });\n  }\n  else{\n    voteTicketsClone[ticketPos].votes = [ {\"userid\": activeUser.userId, \"result\":voteFor } ]; \n  }\n\n  setVoteTickets(voteTicketsClone);\n}\n\n\nfunction closeVoteTicket (voteTicket){\n  let ticketId  = voteTicket.VoteTicketId; //vote ticket id\n\n  let ticketPos = voteTickets.findIndex(vote => vote.VoteTicketId === ticketId); //index in array \n\n  const voteTicketsClone = [...voteTickets]; \n\n  voteTicketsClone[ticketPos].status=\"close\";\n\n  setVoteTickets(voteTicketsClone);\n}\n\n/*******************END VOTING SECTION*************************** */\n\n\n/******************ISSUE TICETS SECTION*************************** */\n\n\n  //update single message with new comment \n  function updateCommentsForIssue(comment, issue){\n  \n    let msgId = issue.ticketId; //issue id\n\n    let issuePos = ticketsArr.findIndex(tck => tck.ticketId === msgId); //index in array \n   \n    const issueClone = [...ticketsArr]; \n    \n    if (issueClone[issuePos].ArrayCommentsId){ //push new obj to exiting array \n      issueClone[issuePos].ArrayCommentsId.push(comment); \n    }\n    else{ //create new object , there is no array \n      issueClone[issuePos].ArrayCommentsId = [{\n                                              \"dateCreated\":comment.dateCreated, \n                                              \"userId\": comment.userId,\n                                              \"buildingId\": comment.buildingId,\n                                              \"commentText\": comment.commentText\n                                           }] ; \n    }\n  \n    setTicketsArr(issueClone);\n\n  }\n\n\n  //Update status of a single ticket \n  function appUpdateIssueStatus(ticketId, strStatus){\n     //find ticket \n     let issuePos = ticketsArr.findIndex(tck => tck.ticketId === ticketId); //index in array \n     //update field\n     const issueClone = [...ticketsArr]; \n     issueClone[issuePos].status = strStatus;\n     //update array of tickets\n     setTicketsArr(issueClone);\n  }\n\n\n  \n  //INSERT NEW TICKET\n  function insertNewTicket(buildingId,userId, dateCreated, title, details, priority, img){\n    \n    let ticketId = 10001;\n    let status=\"Open\";\n    \n    if(ticketsArr){\n      ticketId =  ticketsArr[ticketsArr.length-1].ticketId + 1;\n    }\n\n    const addNewTicket = new TicketModel({\n      ticketId,\n      buildingId,\n      userId, \n      dateCreated, \n      title,\n      details, \n      priority,\n      status,\n      img\n      \n    });\n\n    setTicketsArr(ticketsArr.concat(addNewTicket));\n}\n\n\n//UPDATE\nfunction updateTicket(ticketId, title, details, priority, img){\n   //1. find ticket id in the array of tickets\n  let index = ticketsArr.findIndex(tck => tck.ticketId === ticketId);\n  //console.log(\"result==> \"+ index);\n \n  //2. update existing obj with new data from user \n  if (index){\n    const TicketsClone = [...ticketsArr]; \n\n    TicketsClone[index].title = title; \n    TicketsClone[index].details = details; \n    TicketsClone[index].priority = priority; \n    TicketsClone[index].img = img; \n\n    setTicketsArr(TicketsClone); \n  }\n\n}\n\n\n\n//add or update a message\nfunction addUpdateTicket(ticketId, buildingId,userId,  dateCreated, title, details, priority, img){\n    if (!ticketId){\n      insertNewTicket(buildingId,userId,  dateCreated, title, details, priority, img); \n    }\n    else{\n      console.log(\"update ticket ==> \"); \n      updateTicket(ticketId, title, details, priority, img); \n    }\n}\n\n\n\n\n/******************END ISSUE TICKETS SECTION********************** */\n\n\n\n  return (\n    <ActiveUserContext.Provider value={activeUser}> \n    \n      \n       <HashRouter>\n       <SiteNavBar  onLogout={() => setActiveUser(null)}/>\n          <Switch>\n              <Route exact path=\"/\"><HomePage/></Route>\n              <Route exact path=\"/login\">\n                  <LoginPage  \n                    users={users} \n                    onLogin={user => setActiveUser(user)}/>\n              </Route>\n              <Route exact path=\"/signup\">\n                  <SignUp onNewUser={addUser} />\n              </Route>\n              <Route exact path=\"/tenants\">\n                  <TenantsPage \n                    users={users}\n                    onNewUser={createNewUser}\n                    onDeleteUser = {deleteUser}\n                    onUpdateUser = {updateUser}\n                    />\n              </Route>\n              <Route exact path=\"/messages\">\n                  <Messages \n                    messages={messages} \n                    users={users} \n                    onNewMessage={addNewMsg}  \n                    onDeleteMsg={deleteMsg} \n                    onUpdateComment={updateCommentsForMessage}\n                  />\n              </Route>\n              <Route exact path=\"/votings\">\n                <Votings \n                  voteTickets={voteTickets} \n                  onNewTicket={addNewVoteTicket}\n                  onUpdateDate={updateEndDate}\n                  onUpdateVote={updateVoteOptionsArray}\n                  funcCloseTicket={closeVoteTicket}\n                  />\n              </Route>\n              <Route exact path=\"/dashboard\">\n                <Dashboard  \n                  voteTickets={voteTickets} \n                  />\n              </Route>\n              <Route exact path=\"/tickets\">\n                <Tickets \n                  issues={ticketsArr}\n                  users={users} \n                  onNewTicket={addUpdateTicket} //add or update tickets array\n                  onUpdateCommentIssue={updateCommentsForIssue}  \n                  updateIssueStatus={appUpdateIssueStatus} //update ticket status\n                />\n              </Route> \n\n              <Route exact path=\"/contact\">\n                  <ContactPage />\n              </Route>\n          </Switch>\n       </HashRouter>\n   \n    <Footer/>\n\n    </ActiveUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}